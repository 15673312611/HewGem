import{d as ht,r as n,c as He,a as Be,i as ot,u as Re,w as ne,o as xe,b as Se,e as s,f as l,g as e,h as M,j as g,R as dt,t as k,k as S,l as Pe,m as J,n as R,p as Ie,q as ut,s as ce,v as W,x as ie,y as O,z as ct,A as Ne,B as Ge,C as Y,D as Ze,E as We,F as vt,G as st,H as Me,I as oe,J as x,K as lt,L as rt,M as de,N as Lt,O as Et,P as It,Q as Bt,S as St,T as Ut,U as at,V as ft,W as zt,X as At,Y as Tt,Z as Pt,_ as yt,$ as wt,a0 as Ht,a1 as Rt,a2 as Dt,a3 as Ft,a4 as Ot,a5 as qt,a6 as Nt,a7 as Qe,a8 as et,a9 as mt,aa as pt,ab as _t,ac as Gt,ad as Zt,ae as Wt,af as gt,ag as Jt,ah as bt,ai as Yt,aj as Kt,ak as Xt,al as Qt,am as es,an as ts,ao as ss,ap as os}from"./vendor-84cddc83.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))w(v);new MutationObserver(v=>{for(const i of v)if(i.type==="childList")for(const C of i.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&w(C)}).observe(document,{childList:!0,subtree:!0});function y(v){const i={};return v.integrity&&(i.integrity=v.integrity),v.referrerPolicy&&(i.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?i.credentials="include":v.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function w(v){if(v.ep)return;v.ep=!0;const i=y(v);fetch(v.href,i)}})();const me=ht("user",()=>{const j=n(localStorage.getItem("token")||""),m=n(JSON.parse(localStorage.getItem("user")||"{}")),y=He(()=>!!j.value&&Object.keys(m.value).length>0),w=$=>{j.value=$,localStorage.setItem("token",$)},v=$=>{m.value=$,localStorage.setItem("user",JSON.stringify($))},i=()=>{j.value="",m.value={},localStorage.removeItem("token"),localStorage.removeItem("user")},C=()=>{const $=localStorage.getItem("token"),f=JSON.parse(localStorage.getItem("user")||"{}");return $&&Object.keys(f).length>0?(j.value=$,m.value=f,!0):!1},b=async()=>{try{const $=await fetch("/api/auth/check",{headers:{Authorization:`Bearer ${j.value}`}});if($.ok){const f=await $.json();return v(f),f}return null}catch($){return console.error("更新用户信息失败:",$),null}};return C(),{token:j,user:m,isLoggedIn:y,setToken:w,setUser:v,logout:i,initAuth:C,updateUserInfo:b}}),nt=n(!1);let it=null;function ls(j=null){console.log("Showing login modal"),nt.value=!0,it=j}function rs(){console.log("Hiding login modal"),nt.value=!1,it=null}function as(){return it}function Je(){return{loginModalVisible:nt,showLoginModal:ls,hideLoginModal:rs,getLastRequestConfig:as}}const ns=["/api/auth/login","/api/auth/register","/api/auth/refresh","/api/auth/check"],is="YOUR_PRODUCTION_SECRET_KEY",K=Be.create({timeout:3e4,withCredentials:!0});K.interceptors.request.use(j=>{const{url:m,method:y}=j;console.log(`[Request] ${y==null?void 0:y.toUpperCase()} ${m}`);const w=ns.some(C=>m==null?void 0:m.includes(C)),i=me().token||localStorage.getItem("token");if(j.headers["X-License-Key"]=is,i)return j.headers.Authorization=`Bearer ${i}`,console.log("Token added to request headers:",i),j;if(!w){console.log("Request requires authentication");const{showLoginModal:C}=Je();return C(),Promise.reject(new Error("请先登录"))}return j},j=>(console.error("[Request Error]",j),Promise.reject(j)));K.interceptors.response.use(j=>{const{status:m,config:{url:y},data:w}=j;if(console.log(`[Response] ${m} ${y}`,w),w!=null&&w.token)try{me().setToken(w.token),console.log("Token updated from response data")}catch(v){console.error("Error updating token:",v)}return m===403&&w&&w.message&&w.message.includes("授权验证失败")&&console.error("授权验证失败，请联系管理员获取有效的授权"),w},j=>{var w,v,i;console.error("[Response Error]",j);const m=(w=j.response)==null?void 0:w.status,y=((i=(v=j.response)==null?void 0:v.data)==null?void 0:i.message)||"请求失败，请重试";if(m===403&&j.response&&j.response.data&&j.response.data.message&&j.response.data.message.includes("授权验证失败")&&console.error("授权验证失败，请联系管理员获取有效的授权"),m===401||m===403){console.log(`Received ${m} response, handling auth error`),me().logout();const{showLoginModal:b}=Je();return b(),Promise.reject(new Error(y))}return console.error(`Error ${m}:`,y),Promise.reject(new Error(y))});const tt=n(!1);function kt(){return{registerModalVisible:tt,showRegisterModal:()=>{tt.value=!0},hideRegisterModal:()=>{tt.value=!1}}}const je=(j,m)=>{const y=j.__vccOpts||j;for(const[w,v]of m)y[w]=v;return y},ds={class:"bg-white border-b border-gray-100 shadow-sm backdrop-filter backdrop-blur-md sticky top-0 z-20"},us={class:"max-w-[1440px] mx-auto px-6 h-16 flex items-center justify-between"},cs={class:"flex items-center space-x-8"},vs={class:"flex items-center space-x-4"},fs={key:0,class:"flex items-center px-5 py-2 rounded-full bg-gradient-to-r from-blue-50 to-blue-100 text-blue-600 border border-blue-200 shadow-sm"},ms={class:"font-medium"},ps={key:3,class:"relative flex items-center"},gs={class:"w-9 h-9 rounded-full bg-gradient-to-br from-blue-400 to-blue-500 flex items-center justify-center text-white shadow-sm overflow-hidden"},bs={class:"text-gray-700 font-medium"},xs={key:0,class:"user-menu absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-xl py-2 border border-gray-100 overflow-hidden"},hs={class:"px-4 py-3 border-b border-gray-100"},ys={class:"font-semibold text-gray-900"},ws={class:"text-sm text-gray-500 truncate"},_s={key:0,class:"fixed inset-0 z-50"},ks={class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[480px] bg-white rounded-2xl p-8 shadow-2xl"},Cs={class:"flex justify-between items-center mb-8"},$s={class:"text-2xl font-semibold text-gray-900"},Ms={key:0,class:"text-gray-500 text-base mb-8"},js={key:1,class:"text-gray-500 text-base mb-8"},Vs={key:2,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start"},Ls={class:"ml-3"},Es={class:"text-sm text-red-700"},Is={class:"space-y-2"},Bs={class:"relative"},Ss={key:0,class:"text-red-500 text-sm"},Us={key:0,class:"space-y-2"},zs={class:"relative"},As={key:0,class:"text-red-500 text-sm"},Ts={class:"space-y-2"},Ps={class:"relative"},Hs=["type"],Rs={key:0,class:"text-red-500 text-sm"},Ds={key:1,class:"space-y-2"},Fs={class:"relative"},Os=["type"],qs={key:0,class:"text-red-500 text-sm"},Ns={key:2,class:"space-y-2"},Gs={class:"flex space-x-2"},Zs={class:"relative flex-1"},Ws=["src"],Js={key:0,class:"text-red-500 text-sm"},Ys={class:"flex items-center"},Ks={for:"agreement",class:"ml-2 text-sm text-gray-500"},Xs={key:3,class:"text-red-500 text-sm mt-1"},Qs=["disabled"],eo={key:0,class:"flex items-center justify-center"},to={key:1},so={class:"text-center"},oo={key:1,class:"fixed inset-0 z-[100]"},lo={class:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[90%] max-w-4xl bg-white rounded-2xl shadow-xl"},ro={class:"bg-gray-50 px-6 py-4 sm:px-8 sm:flex sm:flex-row-reverse"},ao={key:2,class:"fixed inset-0 z-50"},no={class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[480px] bg-white rounded-2xl p-8"},io={class:"flex justify-between items-center mb-8"},uo={key:0,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start"},co={class:"ml-3"},vo={class:"text-sm text-red-700"},fo={class:"space-y-2"},mo={class:"relative"},po={key:0,class:"text-red-500 text-sm"},go={class:"space-y-2"},bo={class:"relative"},xo={key:0,class:"text-red-500 text-sm"},ho={class:"space-y-2"},yo={class:"relative"},wo=["type"],_o={key:0,class:"text-red-500 text-sm"},ko={class:"space-y-2"},Co={class:"relative"},$o=["type"],Mo={key:0,class:"text-red-500 text-sm"},jo={class:"space-y-2"},Vo={class:"flex space-x-2"},Lo={class:"relative flex-1"},Eo=["src"],Io={key:0,class:"text-red-500 text-sm"},Bo={class:"flex items-center"},So={for:"agreement",class:"ml-2 text-sm text-gray-500"},Uo={key:0,class:"text-red-500 text-sm mt-1"},zo=["disabled"],Ao={key:0,class:"flex items-center justify-center"},To={key:1},Po={class:"text-center"},Ho={__name:"Navbar",setup(j){const m=me(),{loginModalVisible:y,showLoginModal:w,hideLoginModal:v}=Je(),{registerModalVisible:i,showRegisterModal:C,hideRegisterModal:b}=kt(),$=n(!1),f=n(!1),z=n(!1),A=n(!1),B=n(!1),T=n(""),P=ot("userInfo"),Z=Re(),U=n(!1),h=n(!1),o=n({username:"",email:"",password:"",confirmPassword:"",agreement:!1,captcha:""}),c=n({username:"",email:"",password:"",confirmPassword:"",agreement:"",captcha:""}),_=n(""),V=n("");n("");const D=n(""),I=async()=>{try{const a=await(await fetch("/api/captcha/generate")).json();_.value=`data:image/jpeg;base64,${a.image}`,V.value=a.captchaId,D.value=""}catch(H){console.error("获取验证码失败:",H),D.value="获取验证码失败"}},se=()=>{o.value.username?o.value.username.length<5?c.value.username="账号至少需要5个字符":c.value.username="":c.value.username="请输入账号"},re=()=>{if(f.value){const H=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;o.value.email?H.test(o.value.email)?c.value.email="":c.value.email="请输入有效的邮箱地址":c.value.email="请输入邮箱"}},pe=()=>{o.value.password?o.value.password.length<6?c.value.password="密码至少需要6个字符":c.value.password="":c.value.password="请输入密码"},ge=()=>{f.value&&(o.value.confirmPassword?o.value.confirmPassword!==o.value.password?c.value.confirmPassword="两次输入的密码不一致":c.value.confirmPassword="":c.value.confirmPassword="请确认密码")},X=()=>{h.value?c.value.agreement="":c.value.agreement="请同意用户协议"},ve=()=>{o.value.captcha?/^\d{4}$/.test(o.value.captcha)?c.value.captcha="":c.value.captcha="验证码必须是4位数字":c.value.captcha="请输入验证码"};ne(()=>o.value.username,se),ne(()=>o.value.email,re),ne(()=>o.value.password,pe),ne(()=>o.value.confirmPassword,ge),ne(()=>o.value.agreement,X),ne(()=>o.value.captcha,ve);const he=He(()=>m.isLoggedIn),we=He(()=>f.value?o.value.username&&o.value.password&&o.value.email&&o.value.captcha&&h.value&&Object.values(c.value).every(H=>!H):o.value.username&&o.value.password&&Object.values(c.value).every(H=>!H)),Ue=()=>{f.value=!f.value,o.value={username:"",email:"",password:"",confirmPassword:"",agreement:!1,captcha:""},c.value={username:"",email:"",password:"",confirmPassword:"",agreement:"",captcha:""},T.value="",h.value=!1},_e=async()=>{try{if(f.value){if(!h.value){x.error("请先阅读并同意用户协议");return}if(!o.value.username||!o.value.password||!o.value.email||!o.value.captcha){x.error("请填写所有必填项");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value.email)){x.error("请输入有效的邮箱地址");return}if(o.value.password.length<6){x.error("密码长度不能少于6位");return}z.value=!0;const a=await Be.post("/api/auth/register",{username:o.value.username,password:o.value.password,email:o.value.email,captcha:o.value.captcha,captchaId:V.value,inviteCode:Z.currentRoute.value.query.inviteCode});a.data&&(x.success("注册成功"),m.setToken(a.data.token),m.setUser(a.data.user),P.value=a.data.user,v(),o.value={username:"",password:"",email:"",captcha:""},V.value="",h.value=!1,I(),window.dispatchEvent(new CustomEvent("login-success")))}else{if(!o.value.username||!o.value.password){x.error("请输入用户名和密码");return}z.value=!0;const H=await Be.post("/api/auth/login",{username:o.value.username,password:o.value.password});H.data&&(x.success("登录成功"),m.setToken(H.data.token),m.setUser(H.data.user),P.value=H.data.user,v(),o.value={username:"",password:"",email:"",captcha:""},window.dispatchEvent(new CustomEvent("login-success")))}}catch(H){H.response?x.error(H.response.data||(f.value?"注册失败":"登录失败")):x.error(f.value?"注册失败，请稍后重试":"登录失败，请稍后重试"),f.value&&I()}finally{z.value=!1}},ze=()=>{m.logout(),localStorage.removeItem("userId"),$.value=!1,P.value=null,Z.push("/").then(()=>{window.location.reload()})};ne(y,H=>{H||(T.value="",c.value={username:"",email:"",password:"",confirmPassword:"",agreement:"",captcha:""})}),ne(he,H=>{H&&v()});const Q=H=>{const a=document.querySelector(".user-menu"),ae=document.querySelector(".user-menu-button");a&&ae&&!a.contains(H.target)&&!ae.contains(H.target)&&($.value=!1)};ne(()=>Z.currentRoute.value,()=>{$.value=!1}),xe(()=>{document.addEventListener("click",Q),window.addEventListener("user-info-updated",()=>{P.value&&m.updateUserInfo()}),I()}),Se(()=>{document.removeEventListener("click",Q),window.removeEventListener("user-info-updated",()=>{})});const ue=async()=>{try{if(!h.value){x.error("请先阅读并同意用户协议");return}if(!o.value.username||!o.value.password||!o.value.email||!o.value.captcha){x.error("请填写所有必填项");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value.email)){x.error("请输入有效的邮箱地址");return}if(o.value.password.length<6){x.error("密码长度不能少于6位");return}z.value=!0;const a=await Be.post("/api/auth/register",{username:o.value.username,password:o.value.password,email:o.value.email,captcha:o.value.captcha,captchaId:V.value,inviteCode:Z.currentRoute.value.query.inviteCode});a.data&&(x.success("注册成功"),m.setToken(a.data.token),m.setUser(a.data.user),P.value=a.data.user,b(),o.value={username:"",password:"",email:"",captcha:""},V.value="",h.value=!1,I())}catch(H){H.response?x.error(H.response.data||"注册失败"):x.error("注册失败，请稍后重试"),I()}finally{z.value=!1}};return(H,a)=>{var ae,le,ee,fe;return s(),l(oe,null,[e("nav",ds,[e("div",us,[e("div",cs,[M(g(dt),{to:"/",class:"text-xl font-bold text-primary"}),a[30]||(a[30]=e("div",{class:"flex items-center space-x-6"},null,-1))]),e("div",vs,[he.value?(s(),l("div",fs,[a[31]||(a[31]=e("span",{class:"text-blue-500 mr-2"},"⚡",-1)),e("span",ms,k(((ae=g(P))==null?void 0:ae.power)||0),1)])):S("",!0),he.value?S("",!0):(s(),l("button",{key:1,onClick:a[0]||(a[0]=L=>g(w)()),class:"px-5 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-full hover:shadow-md hover:from-blue-600 hover:to-blue-700 transition-all transform hover:-translate-y-0.5 active:translate-y-0"}," 登录 ")),he.value?(s(),l("div",ps,[e("button",{onClick:a[2]||(a[2]=L=>$.value=!$.value),class:"user-menu-button flex items-center space-x-2 px-3 py-2 rounded-full hover:bg-gray-50 transition-colors"},[e("div",gs,[M(g(Pe),{class:"w-5 h-5"})]),e("span",bs,k((le=g(P))==null?void 0:le.username),1),a[32]||(a[32]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),$.value?(s(),l("div",xs,[e("div",hs,[e("div",ys,k((ee=g(P))==null?void 0:ee.username),1),e("div",ws,k((fe=g(P))==null?void 0:fe.email),1)]),M(g(dt),{to:"/user-center",class:"flex items-center px-4 py-2.5 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors"},{default:J(()=>a[33]||(a[33]=[e("svg",{class:"w-5 h-5 mr-3 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),R(" 个人中心 ")])),_:1}),e("button",{onClick:ze,class:"flex items-center w-full px-4 py-2.5 text-left text-sm text-gray-700 hover:bg-red-50 hover:text-red-600 transition-colors"},a[34]||(a[34]=[e("svg",{class:"w-5 h-5 mr-3 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),R(" 退出登录 ")]))])):S("",!0)])):(s(),l("button",{key:2,onClick:a[1]||(a[1]=L=>g(C)()),class:"ml-2 px-5 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-full hover:shadow-md hover:from-green-600 hover:to-emerald-600 transition-all transform hover:-translate-y-0.5 active:translate-y-0"}," 注册 "))])])]),g(y)?(s(),l("div",_s,[e("div",{class:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:a[3]||(a[3]=(...L)=>g(v)&&g(v)(...L))}),e("div",ks,[e("div",Cs,[e("h2",$s,k(f.value?"创建新账号":"数字人平台"),1),e("button",{onClick:a[4]||(a[4]=(...L)=>g(v)&&g(v)(...L)),class:"text-gray-400 hover:text-gray-500 transition-colors"},[M(g(Ie),{class:"w-6 h-6"})])]),f.value?(s(),l("p",js,"加入数字人平台")):(s(),l("p",Ms,"智能数字人，为您服务")),T.value?(s(),l("div",Vs,[M(g(ut),{class:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"}),e("div",Ls,[e("p",Es,k(T.value),1)]),e("button",{onClick:a[5]||(a[5]=L=>T.value=""),class:"ml-auto -mx-1.5 -my-1.5 p-1.5 text-red-500 hover:text-red-700 rounded-lg focus:ring-2 focus:ring-red-400"},[M(g(Ie),{class:"w-5 h-5"})])])):S("",!0),e("form",{onSubmit:ce(_e,["prevent"]),class:"space-y-6"},[e("div",Is,[e("div",Bs,[W(e("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=L=>o.value.username=L),placeholder:"请输入账号",onBlur:se,class:O(["w-full bg-gray-50 text-gray-900 px-4 py-3.5 rounded-lg pl-11 border transition-colors",c.value.username?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"])},null,34),[[ie,o.value.username]]),M(g(Pe),{class:"w-5 h-5 text-gray-400 absolute left-3.5 top-1/2 transform -translate-y-1/2"})]),c.value.username?(s(),l("p",Ss,k(c.value.username),1)):S("",!0)]),f.value?(s(),l("div",Us,[e("div",zs,[W(e("input",{type:"email","onUpdate:modelValue":a[7]||(a[7]=L=>o.value.email=L),placeholder:"邮箱",onBlur:re,class:O(["w-full bg-gray-50 text-gray-900 px-4 py-3.5 rounded-lg pl-11 border transition-colors",c.value.email?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"])},null,34),[[ie,o.value.email]]),M(g(ct),{class:"w-5 h-5 text-gray-400 absolute left-3.5 top-1/2 transform -translate-y-1/2"})]),c.value.email?(s(),l("p",As,k(c.value.email),1)):S("",!0)])):S("",!0),e("div",Ts,[e("div",Ps,[W(e("input",{type:A.value?"text":"password","onUpdate:modelValue":a[8]||(a[8]=L=>o.value.password=L),placeholder:"密码",onBlur:pe,class:O(["w-full bg-gray-50 text-gray-900 px-4 py-3.5 rounded-lg pl-11 pr-11 border transition-colors",c.value.password?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"])},null,42,Hs),[[Ne,o.value.password]]),M(g(Ge),{class:"w-5 h-5 text-gray-400 absolute left-3.5 top-1/2 transform -translate-y-1/2"}),e("button",{type:"button",onClick:a[9]||(a[9]=L=>A.value=!A.value),class:"absolute right-3.5 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[A.value?(s(),Y(g(Ze),{key:0,class:"w-5 h-5"})):(s(),Y(g(We),{key:1,class:"w-5 h-5"}))])]),c.value.password?(s(),l("p",Rs,k(c.value.password),1)):S("",!0)]),f.value?(s(),l("div",Ds,[e("div",Fs,[W(e("input",{type:B.value?"text":"password","onUpdate:modelValue":a[10]||(a[10]=L=>o.value.confirmPassword=L),placeholder:"确认密码",onBlur:ge,class:O(["w-full bg-gray-50 text-gray-900 px-4 py-3.5 rounded-lg pl-11 pr-11 border transition-colors",c.value.confirmPassword?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"])},null,42,Os),[[Ne,o.value.confirmPassword]]),M(g(Ge),{class:"w-5 h-5 text-gray-400 absolute left-3.5 top-1/2 transform -translate-y-1/2"}),e("button",{type:"button",onClick:a[11]||(a[11]=L=>B.value=!B.value),class:"absolute right-3.5 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[B.value?(s(),Y(g(Ze),{key:0,class:"w-5 h-5"})):(s(),Y(g(We),{key:1,class:"w-5 h-5"}))])]),c.value.confirmPassword?(s(),l("p",qs,k(c.value.confirmPassword),1)):S("",!0)])):S("",!0),f.value?(s(),l("div",Ns,[e("div",Gs,[e("div",Zs,[W(e("input",{type:"text","onUpdate:modelValue":a[12]||(a[12]=L=>o.value.captcha=L),placeholder:"请输入验证码",onBlur:ve,class:O(["w-full bg-gray-50 text-gray-900 px-4 py-3.5 rounded-lg pl-11 border transition-colors",c.value.captcha?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"])},null,34),[[ie,o.value.captcha]]),M(g(vt),{class:"w-5 h-5 text-gray-400 absolute left-3.5 top-1/2 transform -translate-y-1/2"})]),e("img",{src:_.value,onClick:I,class:"h-[52px] rounded-lg cursor-pointer",alt:"验证码"},null,8,Ws)]),c.value.captcha?(s(),l("p",Js,k(c.value.captcha),1)):S("",!0)])):S("",!0),e("div",Ys,[W(e("input",{type:"checkbox","onUpdate:modelValue":a[13]||(a[13]=L=>h.value=L),id:"agreement",onChange:X,class:"w-4 h-4 rounded text-blue-500 focus:ring-blue-500 focus:ring-offset-0"},null,544),[[st,h.value]]),e("label",Ks,[a[35]||(a[35]=R(" 我已阅读并同意 ")),e("button",{type:"button",onClick:a[14]||(a[14]=L=>U.value=!0),class:"text-blue-500 hover:text-blue-600 hover:underline"}," 《用户协议》 ")])]),c.value.agreement?(s(),l("p",Xs,k(c.value.agreement),1)):S("",!0),e("button",{type:"submit",disabled:!we.value||z.value,class:"w-full py-3.5 rounded-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"},[z.value?(s(),l("span",eo,a[36]||(a[36]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),R(" 处理中... ")]))):(s(),l("span",to,k(f.value?"注册账号":"登录系统"),1))],8,Qs),e("div",so,[e("button",{type:"button",onClick:Ue,class:"text-sm text-gray-500 hover:text-gray-700"},k(f.value?"已有账号？立即登录":"注册新账号"),1)])],32)])])):S("",!0),U.value?(s(),l("div",oo,[e("div",{class:"fixed inset-0 bg-black bg-opacity-50",onClick:a[15]||(a[15]=L=>U.value=!1)}),e("div",lo,[a[37]||(a[37]=Me('<div class="bg-white px-6 pt-6 pb-4 sm:p-8" data-v-5275c925><div class="sm:flex sm:items-start" data-v-5275c925><div class="mt-3 text-center sm:mt-0 sm:text-left w-full" data-v-5275c925><h3 class="text-3xl font-bold text-gray-900 mb-8 text-center" data-v-5275c925>用户协议</h3><div class="mt-2 max-h-[70vh] overflow-y-auto px-6" data-v-5275c925><h4 class="text-2xl font-semibold mb-6" data-v-5275c925>数字人系统用户协议</h4><p class="text-gray-600 text-lg mb-4" data-v-5275c925>版本号：1.0</p><p class="text-gray-600 text-lg mb-8" data-v-5275c925>生效日期：2025年2月27日</p><p class="text-lg mb-8 leading-relaxed" data-v-5275c925>欢迎使用我们的数字人系统（以下简称&quot;本平台&quot;）。请您在使用本平台前，仔细阅读并理解本用户协议（以下简称&quot;本协议&quot;）。您一旦注册、登录并使用本平台，即表示您已同意遵守本协议的各项条款。</p><h5 class="text-xl font-semibold mb-4" data-v-5275c925>一、定义</h5><p class="text-lg mb-3" data-v-5275c925>用户：指通过注册成为本平台会员并使用本平台服务的个人或实体。</p><p class="text-lg mb-3" data-v-5275c925>数字形象：指用户在本平台上创建、上传、展示的虚拟形象、图像、音频等内容。</p><p class="text-lg mb-6" data-v-5275c925>音色定制：指用户在本平台上定制或使用的个性化声音特征。</p><h5 class="text-xl font-semibold mb-4" data-v-5275c925>二、用户资格</h5><p class="text-lg mb-3" data-v-5275c925>用户须具备完全民事权利能力和行为能力，具有签订和履行本协议的资格。</p><p class="text-lg mb-6" data-v-5275c925>未满18周岁的未成年人需在法定监护人的陪同下使用本平台。</p><h5 class="text-xl font-semibold mb-4" data-v-5275c925>三、用户内容的提交与授权</h5><p class="text-lg font-medium mb-3" data-v-5275c925>合法授权：</p><p class="text-lg mb-3" data-v-5275c925>用户在本平台提交的所有数字形象、文案、音色定制等内容，必须拥有合法的知识产权或已获得合法授权。</p><p class="text-lg mb-6" data-v-5275c925>用户保证其提交的内容不侵犯任何第三方的知识产权、肖像权、隐私权及其他合法权利。</p><p class="text-lg font-medium mb-3" data-v-5275c925>授权范围：</p><p class="text-lg mb-6" data-v-5275c925>用户同意授予本平台在全球范围内、免费、不可撤销、永久性的使用权，包括但不限于复制、展示、修改、分发、传播和衍生作品的制作权。</p><p class="text-lg font-medium mb-3" data-v-5275c925>禁止行为：</p><p class="text-lg mb-3" data-v-5275c925>禁止用户上传、提交任何未经授权的第三方版权作品。</p><p class="text-lg mb-6" data-v-5275c925>禁止上传、提交含有违法、侵权、诽谤、淫秽、暴力等不良内容的数字形象或文案。</p><h5 class="text-xl font-semibold mb-4" data-v-5275c925>四、平台权利与义务</h5><p class="text-lg font-medium mb-3" data-v-5275c925>内容审核：</p><p class="text-lg mb-6 leading-relaxed" data-v-5275c925>本平台会在自身能力范围内对用户提交的大量数据进行分析、检测，包括但不限于内容的合法性、合规性和版权归属。本平台将尽力履行内容审核义务，但由于审核机制可能依赖于算法等技术手段，平台不能保证100%的准确性。用户有义务确保其提交的内容符合相关法律法规，并承担由此产生的法律责任。</p><p class="text-lg font-medium mb-3" data-v-5275c925>违规处理：</p><ul class="list-disc pl-8 mb-6 text-lg" data-v-5275c925><li class="mb-2" data-v-5275c925>删除相关内容；</li><li class="mb-2" data-v-5275c925>暂停或终止用户的账号；</li><li class="mb-2" data-v-5275c925>向相关执法部门报告；</li><li class="mb-2" data-v-5275c925>追究用户的法律责任。</li></ul><p class="text-lg font-medium mb-3" data-v-5275c925>免责条款：</p><p class="text-lg mb-3" data-v-5275c925>本平台对用户提交内容的真实性、合法性不作保证。用户因使用本平台服务而导致的任何损失，本平台不承担任何责任。</p><p class="text-lg mb-6" data-v-5275c925>对于因第三方权利主张而导致的纠纷，本平台不承担任何责任，用户应自行承担相应的法律责任。</p><h5 class="text-xl font-semibold mb-4" data-v-5275c925>五、知识产权</h5><p class="text-lg font-medium mb-3" data-v-5275c925>平台权利：</p><p class="text-lg mb-6" data-v-5275c925>本平台拥有平台运营过程中产生的所有内容的知识产权，包括但不限于软件、界面设计、商标等。</p><p class="text-lg font-medium mb-3" data-v-5275c925>用户权利：</p><p class="text-lg mb-6" data-v-5275c925>用户对其合法上传的内容保留所有权利，但同意按照本协议授予本平台使用权。</p><h5 class="text-xl font-semibold mb-4" data-v-5275c925>六、隐私保护</h5><p class="text-lg mb-3" data-v-5275c925>本平台承诺保护用户的隐私，严格按照《中华人民共和国个人信息保护法》等相关法律法规处理用户的个人信息。</p><p class="text-lg mb-6" data-v-5275c925>用户同意本平台按照隐私政策收集、使用、存储和披露其个人信息。</p><h5 class="text-xl font-semibold mb-4" data-v-5275c925>七、协议的修改与终止</h5><p class="text-lg mb-3" data-v-5275c925>本平台有权随时修改本协议条款，修改后的协议将在平台上公布，并自公布之日起生效。</p><p class="text-lg mb-3" data-v-5275c925>用户在协议修改后继续使用本平台服务，视为接受修改后的协议。</p><p class="text-lg mb-6" data-v-5275c925>本平台有权在任何时候终止或暂停对用户的服务，且无需事先通知。</p><h5 class="text-xl font-semibold mb-4" data-v-5275c925>八、法律适用与争议解决</h5><p class="text-lg mb-3" data-v-5275c925>本协议的签订、履行及解释均适用中华人民共和国法律。</p><p class="text-lg mb-6" data-v-5275c925>因本协议引起的或与本协议有关的任何争议，双方应友好协商解决；协商不成的，任何一方均可向平台开发者所在地——永济市人民法院提起诉讼。</p><h5 class="text-xl font-semibold mb-4" data-v-5275c925>九、其他条款</h5><p class="text-lg mb-3" data-v-5275c925>本协议构成用户与本平台之间关于使用本平台服务的完整协议，取代任何先前的口头或书面协议。</p><p class="text-lg mb-6" data-v-5275c925>如果本协议的任何条款被认定为无效或不可执行，其余条款仍然有效。</p></div></div></div></div>',1)),e("div",ro,[e("button",{type:"button",onClick:a[16]||(a[16]=L=>U.value=!1),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-6 py-3 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-lg"}," 关闭 ")])])])):S("",!0),g(i)?(s(),l("div",ao,[e("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:a[17]||(a[17]=(...L)=>g(b)&&g(b)(...L))}),e("div",no,[e("div",io,[a[38]||(a[38]=e("h2",{class:"text-2xl font-semibold text-gray-900"},"创建新账号",-1)),e("button",{onClick:a[18]||(a[18]=(...L)=>g(b)&&g(b)(...L)),class:"text-gray-400 hover:text-gray-500 transition-colors"},[M(g(Ie),{class:"w-6 h-6"})])]),a[41]||(a[41]=e("p",{class:"text-gray-500 text-base mb-8"},"加入数字人平台",-1)),T.value?(s(),l("div",uo,[M(g(ut),{class:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"}),e("div",co,[e("p",vo,k(T.value),1)]),e("button",{onClick:a[19]||(a[19]=L=>T.value=""),class:"ml-auto -mx-1.5 -my-1.5 p-1.5 text-red-500 hover:text-red-700 rounded-lg focus:ring-2 focus:ring-red-400"},[M(g(Ie),{class:"w-5 h-5"})])])):S("",!0),e("form",{onSubmit:ce(ue,["prevent"]),class:"space-y-6"},[e("div",fo,[e("div",mo,[W(e("input",{type:"text","onUpdate:modelValue":a[20]||(a[20]=L=>o.value.username=L),placeholder:"请输入账号",onBlur:se,class:O(["w-full bg-gray-50 text-gray-900 px-4 py-3.5 rounded-lg pl-11 border transition-colors",c.value.username?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"])},null,34),[[ie,o.value.username]]),M(g(Pe),{class:"w-5 h-5 text-gray-400 absolute left-3.5 top-1/2 transform -translate-y-1/2"})]),c.value.username?(s(),l("p",po,k(c.value.username),1)):S("",!0)]),e("div",go,[e("div",bo,[W(e("input",{type:"email","onUpdate:modelValue":a[21]||(a[21]=L=>o.value.email=L),placeholder:"邮箱",onBlur:re,class:O(["w-full bg-gray-50 text-gray-900 px-4 py-3.5 rounded-lg pl-11 border transition-colors",c.value.email?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"])},null,34),[[ie,o.value.email]]),M(g(ct),{class:"w-5 h-5 text-gray-400 absolute left-3.5 top-1/2 transform -translate-y-1/2"})]),c.value.email?(s(),l("p",xo,k(c.value.email),1)):S("",!0)]),e("div",ho,[e("div",yo,[W(e("input",{type:A.value?"text":"password","onUpdate:modelValue":a[22]||(a[22]=L=>o.value.password=L),placeholder:"密码",onBlur:pe,class:O(["w-full bg-gray-50 text-gray-900 px-4 py-3.5 rounded-lg pl-11 pr-11 border transition-colors",c.value.password?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"])},null,42,wo),[[Ne,o.value.password]]),M(g(Ge),{class:"w-5 h-5 text-gray-400 absolute left-3.5 top-1/2 transform -translate-y-1/2"}),e("button",{type:"button",onClick:a[23]||(a[23]=L=>A.value=!A.value),class:"absolute right-3.5 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[A.value?(s(),Y(g(Ze),{key:0,class:"w-5 h-5"})):(s(),Y(g(We),{key:1,class:"w-5 h-5"}))])]),c.value.password?(s(),l("p",_o,k(c.value.password),1)):S("",!0)]),e("div",ko,[e("div",Co,[W(e("input",{type:B.value?"text":"password","onUpdate:modelValue":a[24]||(a[24]=L=>o.value.confirmPassword=L),placeholder:"确认密码",onBlur:ge,class:O(["w-full bg-gray-50 text-gray-900 px-4 py-3.5 rounded-lg pl-11 pr-11 border transition-colors",c.value.confirmPassword?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"])},null,42,$o),[[Ne,o.value.confirmPassword]]),M(g(Ge),{class:"w-5 h-5 text-gray-400 absolute left-3.5 top-1/2 transform -translate-y-1/2"}),e("button",{type:"button",onClick:a[25]||(a[25]=L=>B.value=!B.value),class:"absolute right-3.5 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[B.value?(s(),Y(g(Ze),{key:0,class:"w-5 h-5"})):(s(),Y(g(We),{key:1,class:"w-5 h-5"}))])]),c.value.confirmPassword?(s(),l("p",Mo,k(c.value.confirmPassword),1)):S("",!0)]),e("div",jo,[e("div",Vo,[e("div",Lo,[W(e("input",{type:"text","onUpdate:modelValue":a[26]||(a[26]=L=>o.value.captcha=L),placeholder:"请输入验证码",onBlur:ve,class:O(["w-full bg-gray-50 text-gray-900 px-4 py-3.5 rounded-lg pl-11 border transition-colors",c.value.captcha?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"])},null,34),[[ie,o.value.captcha]]),M(g(vt),{class:"w-5 h-5 text-gray-400 absolute left-3.5 top-1/2 transform -translate-y-1/2"})]),e("img",{src:_.value,onClick:I,class:"h-[52px] rounded-lg cursor-pointer",alt:"验证码"},null,8,Eo)]),c.value.captcha?(s(),l("p",Io,k(c.value.captcha),1)):S("",!0)]),e("div",Bo,[W(e("input",{type:"checkbox","onUpdate:modelValue":a[27]||(a[27]=L=>h.value=L),id:"agreement",onChange:X,class:"w-4 h-4 rounded text-blue-500 focus:ring-blue-500 focus:ring-offset-0"},null,544),[[st,h.value]]),e("label",So,[a[39]||(a[39]=R(" 我已阅读并同意 ")),e("button",{type:"button",onClick:a[28]||(a[28]=L=>U.value=!0),class:"text-blue-500 hover:text-blue-600 hover:underline"}," 《用户协议》 ")])]),c.value.agreement?(s(),l("p",Uo,k(c.value.agreement),1)):S("",!0),e("button",{type:"submit",disabled:!we.value||z.value,class:"w-full py-3.5 rounded-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"},[z.value?(s(),l("span",Ao,a[40]||(a[40]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),R(" 处理中... ")]))):(s(),l("span",To,"注册账号"))],8,zo),e("div",Po,[e("button",{type:"button",onClick:a[29]||(a[29]=L=>{g(b)(),g(w)()}),class:"text-sm text-gray-500 hover:text-gray-700"}," 已有账号？立即登录 ")])],32)])])):S("",!0)],64)}}},Ro=je(Ho,[["__scopeId","data-v-5275c925"]]);const Do={class:"w-[240px] bg-white border-r border-gray-100 h-screen flex flex-col sticky top-0 shadow-sm"},Fo={class:"flex-1 py-6 px-3 overflow-y-auto custom-scrollbar"},Oo={key:0,class:"absolute right-0 top-1/2 -translate-y-1/2 w-1.5 h-8 bg-gradient-to-b from-blue-500 to-blue-600 rounded-l-full"},qo={key:0,class:"absolute right-0 top-1/2 -translate-y-1/2 w-1.5 h-8 bg-gradient-to-b from-blue-500 to-blue-600 rounded-l-full"},No={class:"p-4 border-t border-gray-100"},Go={__name:"Sidebar",setup(j){const m=lt(),y=[{name:"首页",path:"/",icon:It},{name:"形象市场",path:"/market",icon:Bt},{name:"我的作品",path:"/works",icon:St},{name:"我的数字人",path:"/digital-human",icon:Pe},{name:"声音克隆",path:"/voice-clone",icon:Ut}],w=i=>m.path===i||i!=="/"&&m.path.startsWith(i),v=()=>{window.dispatchEvent(new CustomEvent("show-invite-dialog"))};return(i,C)=>{const b=rt("router-link");return s(),l("div",Do,[C[2]||(C[2]=e("div",{class:"h-16 flex items-center px-6 border-b border-gray-100 bg-white"},[e("div",{class:"flex items-center space-x-3"},[e("span",{class:"text-xl font-bold bg-gradient-to-r from-blue-600 to-blue-700 bg-clip-text text-transparent"},"数字人平台")])],-1)),e("nav",Fo,[(s(),l(oe,null,de(y,$=>M(b,{key:$.path,to:$.path,class:O(["flex items-center px-4 py-3 mb-2 rounded-xl transition-all duration-200 relative group",[w($.path)?"bg-blue-50 text-blue-600 font-medium shadow-sm":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]])},{default:J(()=>[(s(),Y(Lt($.icon),{class:O(["w-5 h-5 mr-3 transition-colors",w($.path)?"text-blue-600":"text-gray-400 group-hover:text-gray-600"])},null,8,["class"])),e("span",null,k($.name),1),w($.path)?(s(),l("div",Oo)):S("",!0)]),_:2},1032,["to","class"])),64)),M(b,{to:"/user-center",class:O(["flex items-center px-4 py-3 mb-2 rounded-xl transition-all duration-200 relative group",[w("/user-center")?"bg-blue-50 text-blue-600 font-medium shadow-sm":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]])},{default:J(()=>[M(g(Pe),{class:O(["w-5 h-5 mr-3 transition-colors",w("/user-center")?"text-blue-600":"text-gray-400 group-hover:text-gray-600"])},null,8,["class"]),C[0]||(C[0]=e("span",null,"个人中心",-1)),w("/user-center")?(s(),l("div",qo)):S("",!0)]),_:1},8,["class"])]),e("div",No,[e("button",{onClick:v,class:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:-translate-y-0.5 active:translate-y-0 shadow-sm hover:shadow-md"},[M(g(Et),{class:"w-5 h-5"}),C[1]||(C[1]=e("span",null,"邀请有礼",-1))])])])}}},Zo=je(Go,[["__scopeId","data-v-051a3796"]]);const Wo={class:"invite-bg rounded-2xl overflow-hidden relative shadow-lg"},Jo={class:"bg-white rounded-xl mx-10 p-5 flex flex-col md:flex-row items-center justify-between shadow-lg relative z-10"},Yo={class:"flex flex-col md:flex-row items-center"},Ko={class:"text-base text-gray-900 font-semibold flex items-center"},Xo={class:"text-blue-600 font-bold text-xl ml-1.5"},Qo={class:"flex flex-col items-center mt-10 mb-4 relative z-10 px-10"},el={class:"mt-3 text-gray-500 text-sm"},tl={class:"font-mono font-medium select-all text-blue-600"},sl={__name:"InviteDialog",setup(j){const m=me(),y=n(!1),w=n(""),v=n(0),i=()=>{var f;if(!((f=m.user)!=null&&f.inviteCode)){x.error("邀请码获取失败，请刷新页面重试");return}const $=window.location.origin;w.value=`${$}?inviteCode=${m.user.inviteCode}`},C=()=>{navigator.clipboard.writeText(w.value).then(()=>{x.success("邀请链接已复制")}).catch(()=>{x.error("复制失败，请手动复制")})},b=async()=>{var $;if(($=m.user)!=null&&$.id)try{const f=await K.get("/api/invite/total-reward",{params:{userId:m.user.id}});f.code===200&&(v.value=f.data)}catch{v.value=0}};return xe(()=>{window.addEventListener("show-invite-dialog",()=>{y.value=!0,i(),b()})}),Se(()=>{window.removeEventListener("show-invite-dialog",()=>{y.value=!0})}),($,f)=>{const z=at;return s(),Y(z,{modelValue:y.value,"onUpdate:modelValue":f[0]||(f[0]=A=>y.value=A),width:"620px","close-on-click-modal":!1,class:"invite-dialog","show-close":!0,"destroy-on-close":!0,top:"8vh"},{footer:J(()=>f[12]||(f[12]=[])),default:J(()=>{var A;return[e("div",Wo,[f[7]||(f[7]=e("div",{class:"absolute left-0 top-0 w-full h-64 bg-gradient-to-br from-blue-400 via-blue-500 to-indigo-500 z-0 opacity-90"},null,-1)),f[8]||(f[8]=e("div",{class:"absolute right-0 top-0 w-64 h-64"},[e("svg",{class:"opacity-20",viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"#FFFFFF",d:"M46.6,-77.8C59.8,-70.6,69.7,-56.6,77.9,-41.5C86.1,-26.4,92.6,-10.3,91.8,5.5C91,21.3,82.8,36.9,71.6,49.2C60.3,61.5,46,70.5,30.6,76.8C15.3,83.2,-1.1,86.9,-16.9,84.2C-32.7,81.6,-47.9,72.7,-59.7,60.3C-71.5,47.9,-79.9,32.1,-83.1,15.2C-86.3,-1.7,-84.4,-19.7,-76.8,-34.3C-69.2,-48.9,-55.9,-60,-41.7,-67.3C-27.5,-74.6,-12.2,-78,-0.4,-77.3C11.3,-76.5,33.4,-85,46.6,-77.8Z",transform:"translate(100 100)"})])],-1)),f[9]||(f[9]=e("div",{class:"absolute left-0 bottom-0 opacity-10"},[e("svg",{width:"300",height:"300",viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"#4F46E5",d:"M47.7,-73.2C59.1,-67.3,64.2,-49.7,69.9,-33.8C75.7,-17.9,82.1,-3.5,80.4,9.5C78.7,22.6,68.9,34.4,58.2,44.3C47.6,54.2,36.1,62.2,22.8,68.6C9.5,75,-5.5,79.9,-20.4,78C-35.2,76.2,-49.8,67.7,-58,55.5C-66.3,43.3,-68.2,27.5,-70.8,11.7C-73.3,-4.1,-76.4,-19.8,-71.8,-32.8C-67.1,-45.8,-54.7,-56.1,-41.2,-60.9C-27.8,-65.6,-13.9,-64.9,1.6,-67.4C17,-69.9,34.1,-75.7,47.7,-73.2Z",transform:"translate(100 100)"})])],-1)),f[10]||(f[10]=e("div",{class:"relative z-10 px-12 pt-12 pb-6 flex flex-col items-center"},[e("div",{class:"text-white text-3xl md:text-4xl font-black mb-4 text-center drop-shadow-md tracking-tight"},"邀请好友注册，立获"),e("div",{class:"flex items-center justify-center relative mb-4"},[e("div",{class:"absolute inset-0 bg-white/30 blur-xl rounded-full"}),e("div",{class:"relative flex items-end"},[e("span",{class:"text-[62px] md:text-[80px] font-extrabold text-white leading-none",style:{"text-shadow":"0 8px 24px rgba(37, 99, 235, 0.5)"}},"300"),e("span",{class:"text-3xl font-bold text-white ml-3 mb-3"},"算力")])]),e("div",{class:"bg-white/90 rounded-full px-6 py-2 text-blue-600 font-medium text-base mb-6 shadow-md"}," 等于5分钟时长，有效期30天 ")],-1)),e("div",Jo,[e("div",Yo,[f[3]||(f[3]=e("svg",{class:"w-8 h-8 text-blue-500 mr-3",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5l6.74-6.76zM16 17l-3.54-3.54",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M19.48 10.52c.3.28.48.67.52 1.08",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",null,[e("div",Ko,[f[1]||(f[1]=R(" 已累计获得 ")),e("span",Xo,k(v.value),1),f[2]||(f[2]=R(" 算力 "))])])]),f[4]||(f[4]=e("div",{class:"text-sm text-gray-500 mt-2 md:mt-0 border-l pl-4 hidden md:block"},"您每月最多可获得3000算力",-1))]),e("div",Qo,[e("button",{onClick:C,class:"group w-full py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white text-xl font-bold rounded-xl shadow-lg hover:from-blue-600 hover:to-indigo-700 transition-all duration-300 transform hover:-translate-y-0.5 active:translate-y-0 flex items-center justify-center"},f[5]||(f[5]=[e("svg",{class:"w-6 h-6 mr-2 group-hover:animate-pulse",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M8 5H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-1M8 5a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2M8 5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2m0 0h2a2 2 0 0 1 2 2v3m2 4H10m0 0l3-3m-3 3l3 3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),R(" 复制邀请链接 ")])),e("div",el,[f[6]||(f[6]=R(" 邀请码: ")),e("span",tl,k((A=g(m).user)==null?void 0:A.inviteCode),1)])]),f[11]||(f[11]=e("div",{class:"mx-10 mb-8 mt-4 bg-blue-50 rounded-xl p-5 text-gray-700 text-sm relative z-10 border border-blue-100"},[e("div",{class:"flex items-center font-semibold mb-3 text-blue-800"},[e("svg",{class:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),R(" 使用说明： ")]),e("ul",{class:"list-disc pl-6 space-y-2"},[e("li",null,"复制邀请链接或邀请码给好友，对方通过邀请注册成功后，你即可获得300算力。"),e("li",null,"如发现违规获取算力的行为，将追回算力或冻结账号。"),e("li",null,"活动解释权归官方所有。")])],-1))])]}),_:1},8,["modelValue"])}}},ol=je(sl,[["__scopeId","data-v-505570dc"]]),ll={class:"min-h-screen bg-[#f5f6f7] flex"},rl={class:"flex-1"},al={class:"max-w-[1440px] mx-auto px-4 py-4"},nl={__name:"App",setup(j){const m=n(!1),y=n(""),w=n("success"),v=me(),i=n(null),C=lt(),{registerModalVisible:b,showRegisterModal:$,hideRegisterModal:f}=kt();ft("showGlobalMessage",(B,T="success",P=2e3)=>{y.value=B,w.value=T,m.value=!0,setTimeout(()=>{m.value=!1},P)}),ft("userInfo",i),ne(()=>C.query,B=>{B.inviteCode&&$()},{immediate:!0});const A=async()=>{if(v.token&&Object.keys(v.user).length>0)try{const B=await K.get("/api/auth/check");console.log("Check response:",B),B&&B.id?(v.setUser(B),i.value=B,console.log("登录状态已恢复")):(console.log("Token验证失败，清除登录状态"),v.logout(),i.value=null)}catch(B){console.error("验证token失败:",B),v.logout(),i.value=null}else console.log("本地没有token或用户信息，未登录状态"),i.value=null};return xe(()=>{A()}),(B,T)=>{const P=rt("router-view");return s(),l(oe,null,[e("div",ll,[M(Zo),e("div",rl,[M(Ro),e("main",al,[M(P)])])]),m.value?(s(),l("div",{key:0,class:O(["fixed top-4 left-1/2 transform -translate-x-1/2 px-4 py-2 text-white rounded-lg shadow-lg transition-all duration-300 z-50",[w.value==="error"?"bg-red-500":"bg-green-500",{"opacity-0":!m.value}]])},k(y.value),3)):S("",!0),M(ol)],64)}}},il="modulepreload",dl=function(j){return"/"+j},xt={},Te=function(m,y,w){if(!y||y.length===0)return m();const v=document.getElementsByTagName("link");return Promise.all(y.map(i=>{if(i=dl(i),i in xt)return;xt[i]=!0;const C=i.endsWith(".css"),b=C?'[rel="stylesheet"]':"";if(!!w)for(let z=v.length-1;z>=0;z--){const A=v[z];if(A.href===i&&(!C||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${b}`))return;const f=document.createElement("link");if(f.rel=C?"stylesheet":il,C||(f.as="script",f.crossOrigin=""),f.href=i,document.head.appendChild(f),C)return new Promise((z,A)=>{f.addEventListener("load",z),f.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>m()).catch(i=>{const C=new Event("vite:preloadError",{cancelable:!0});if(C.payload=i,window.dispatchEvent(C),!C.defaultPrevented)throw i})};const ul={class:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 shadow-sm hover:shadow-md transition-all duration-300 mb-8"},cl={class:"flex flex-col md:flex-row items-center justify-between gap-6"},vl={class:"flex-1 text-center md:text-left"},fl={class:"flex flex-wrap gap-4"},ml={class:"bg-white rounded-lg p-6"},pl={key:0,class:"grid grid-cols-5 gap-4"},gl={class:"relative h-[240px] bg-gray-100 overflow-hidden"},bl=["src"],xl=["src"],hl={key:2,class:"w-full h-full flex items-center justify-center"},yl={key:3,class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300"},wl=["onClick"],_l={class:"p-4 flex-1 flex flex-col"},kl={class:"text-lg font-medium text-gray-800 mb-2 line-clamp-1 group-hover:text-primary transition-colors"},Cl={class:"flex items-center justify-between mb-2"},$l={class:"text-sm text-gray-500"},Ml={class:"flex items-center justify-between mt-auto space-x-2"},jl={key:1,class:"py-10 flex flex-col items-center"},Vl={class:"video-container"},Ll=["src"],El={__name:"Home",setup(j){const m=n([]);Re();const{loginModalVisible:y,showLoginModal:w}=Je(),v=n(!1),i=n(!1),C=n(""),b=n(null);xe(()=>{window.addEventListener("login-success",()=>{$()})}),ne(y,U=>{if(!U&&!v.value){const h=localStorage.getItem("token"),o=localStorage.getItem("userId");h&&o&&$()}});const $=async()=>{var U,h;if(!v.value)try{v.value=!0;const o=localStorage.getItem("token"),c=localStorage.getItem("userId"),_=await Be.get("/api/task/list",{params:{userId:c,page:1,pageSize:20},headers:{Authorization:`Bearer ${o}`}});m.value=_.data.data||[]}catch(o){((U=o.response)==null?void 0:U.status)===401||((h=o.response)==null?void 0:h.status)===403?w():(x.error("获取任务列表失败"),console.error(o))}finally{v.value=!1}},f=U=>new Date(U).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),z=U=>({1:"审核中",2:"处理中",3:"已完成",4:"合成失败",5:"合成失败"})[U]||"未知状态",A=U=>U?`${U.split("?")[0]}?x-oss-process=video/snapshot,t_0`:"",B=U=>{C.value=U.resultUrl,i.value=!0},T=()=>{b.value&&(b.value.pause(),b.value.currentTime=0)},P=U=>{try{const h=x({message:"正在准备下载...",type:"info",duration:0,showClose:!0}),o=document.createElement("a");o.href=U.resultUrl,o.download=`作品_${U.name||U.id}.mp4`,o.target="_blank",document.body.appendChild(o),o.click(),document.body.removeChild(o),h.close(),x.success("下载已开始")}catch(h){x.error("下载失败："+(h.message||"未知错误"))}},Z=async U=>{var h,o;try{await Pt.confirm("确定要删除这个作品吗？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const c=localStorage.getItem("token");await Be.delete(`/api/task/${U.id}`,{headers:{Authorization:`Bearer ${c}`}}),x.success("删除成功"),$()}catch(c){if(c==="cancel")return;((h=c.response)==null?void 0:h.status)===401||((o=c.response)==null?void 0:o.status)===403?w():x.error("删除失败")}};return xe(()=>{$()}),(U,h)=>{const o=rt("router-link"),c=yt,_=wt,V=Ht,D=at;return s(),l("div",null,[e("div",ul,[e("div",cl,[e("div",vl,[h[3]||(h[3]=Me('<div class="flex items-center gap-3 mb-3" data-v-6505053e><div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center" data-v-6505053e><svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-6505053e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" data-v-6505053e></path></svg></div><h2 class="text-2xl font-bold text-gray-900" data-v-6505053e>开始创作</h2></div><p class="text-gray-600 mb-4" data-v-6505053e>选择模板，快速生成您的数字人视频</p>',2)),e("div",fl,[M(o,{to:"/create",class:"inline-flex items-center px-5 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all duration-300 transform hover:scale-105"},{default:J(()=>h[1]||(h[1]=[e("span",{class:"mr-2"},"开始创作",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])),_:1}),h[2]||(h[2]=e("div",{class:"flex items-center text-sm text-gray-500"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-green-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",null,"已支持多种模板")],-1))])]),h[4]||(h[4]=Me('<div class="flex-1 flex justify-center" data-v-6505053e><div class="relative w-48 h-48" data-v-6505053e><div class="absolute inset-0 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full opacity-20 animate-pulse" data-v-6505053e></div><div class="absolute inset-0 flex items-center justify-center" data-v-6505053e><div class="grid grid-cols-2 gap-2" data-v-6505053e><div class="w-16 h-16 bg-white/80 rounded-lg flex items-center justify-center shadow-sm" data-v-6505053e><svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-6505053e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" data-v-6505053e></path></svg></div><div class="w-16 h-16 bg-white/80 rounded-lg flex items-center justify-center shadow-sm" data-v-6505053e><svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-6505053e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" data-v-6505053e></path></svg></div><div class="w-16 h-16 bg-white/80 rounded-lg flex items-center justify-center shadow-sm" data-v-6505053e><svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-6505053e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-6505053e></path></svg></div><div class="w-16 h-16 bg-white/80 rounded-lg flex items-center justify-center shadow-sm" data-v-6505053e><svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-6505053e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-6505053e></path></svg></div></div></div></div></div>',1))])]),e("div",ml,[h[9]||(h[9]=e("div",{class:"flex items-center space-x-6 border-b border-gray-100 pb-4 mb-6"},[e("button",{class:"text-sm transition-colors relative pb-4 -mb-4 text-primary font-medium"},[R(" 作品 "),e("div",{class:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})])],-1)),m.value.length>0?(s(),l("div",pl,[(s(!0),l(oe,null,de(m.value,I=>(s(),l("div",{key:I.id,class:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-all duration-300 group h-[420px] flex flex-col"},[e("div",gl,[I.status==="1"||I.status==="2"||I.status==="4"||I.status==="5"?(s(),l("img",{key:0,src:A(I.videoUrl),class:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-300"},null,8,bl)):I.status==="3"?(s(),l("video",{key:1,src:I.resultUrl,class:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-300"},null,8,xl)):(s(),l("div",hl,[M(c,{class:"text-gray-400",size:40},{default:J(()=>[M(g(zt))]),_:1})])),e("div",{class:O(["absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-medium shadow-sm",{"bg-yellow-100 text-yellow-800":I.status==="1","bg-blue-100 text-blue-800":I.status==="2","bg-green-100 text-green-800":I.status==="3","bg-red-100 text-red-800":I.status==="4"||I.status==="5"}])},k(z(I.status)),3),h[6]||(h[6]=e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300"},null,-1)),I.status==="3"?(s(),l("div",yl,[e("button",{onClick:ce(se=>B(I),["stop"]),class:"w-12 h-12 rounded-full bg-white/90 hover:bg-white flex items-center justify-center transition-all duration-300 hover:scale-110"},h[5]||(h[5]=[e("div",{class:"w-0 h-0 border-t-[8px] border-t-transparent border-l-[12px] border-l-primary border-b-[8px] border-b-transparent ml-1"},null,-1)]),8,wl)])):S("",!0)]),e("div",_l,[e("h3",kl,k(I.name),1),e("div",Cl,[e("span",$l,k(f(I.createTime)),1)]),e("div",Ml,[I.status==="3"?(s(),Y(_,{key:0,onClick:se=>P(I),class:"flex-1 h-11 px-0 bg-gradient-to-r from-blue-500 to-indigo-500 text-white border-0 shadow-[0_2px_8px_0_rgba(59,130,246,0.10)] hover:brightness-110 hover:shadow-[0_4px_16px_0_rgba(59,130,246,0.15)] transition-all duration-300 rounded-xl font-semibold tracking-wide relative overflow-hidden before:absolute before:inset-0 before:bg-white before:opacity-0 hover:before:opacity-5 before:transition-opacity before:duration-300",icon:g(At),size:"default"},{default:J(()=>h[7]||(h[7]=[e("span",{class:"text-white"},"下载视频",-1)])),_:2},1032,["onClick","icon"])):S("",!0),M(_,{onClick:se=>Z(I),class:"flex-1 h-11 px-0 bg-gradient-to-r from-red-400 to-red-500 text-white border-0 shadow-[0_2px_8px_0_rgba(244,63,94,0.10)] hover:brightness-110 hover:shadow-[0_4px_16px_0_rgba(244,63,94,0.15)] transition-all duration-300 rounded-xl font-semibold tracking-wide relative overflow-hidden before:absolute before:inset-0 before:bg-white before:opacity-0 hover:before:opacity-5 before:transition-opacity before:duration-300",icon:g(Tt),size:"default"},{default:J(()=>h[8]||(h[8]=[e("span",{class:"text-white"},"删除",-1)])),_:2},1032,["onClick","icon"])])])]))),128))])):(s(),l("div",jl,[M(V,{description:"暂无作品"})]))]),M(D,{modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=I=>i.value=I),title:"视频播放",width:"800px","close-on-click-modal":!1,"close-on-press-escape":!0,class:"video-dialog",onClosed:T},{default:J(()=>[e("div",Vl,[C.value?(s(),l("video",{key:0,ref_key:"videoPlayer",ref:b,src:C.value,controls:"",class:"video-player",autoplay:""},null,8,Ll)):S("",!0)])]),_:1},8,["modelValue"])])}}},Il=je(El,[["__scopeId","data-v-6505053e"]]),Bl=ht("digitalHuman",{state:()=>({currentDigitalHumanId:null,currentDigitalHumanVideoUrl:null}),actions:{setCurrentDigitalHuman(j,m){this.currentDigitalHumanId=j,this.currentDigitalHumanVideoUrl=m},clearCurrentDigitalHuman(){this.currentDigitalHumanId=null,this.currentDigitalHumanVideoUrl=null}}});async function Sl(j,m="uploads"){const y=await K.get("/api/oss/presigned-url",{params:{fileName:j,directory:m}});if(y.code!==200)throw new Error(y.message||"获取 OSS 上传凭证失败");return y.data}async function Ct(j,m){const y=await Sl(j.name,m),w=new FormData;Object.entries(y).forEach(([i,C])=>{i!=="resourceUrl"&&w.append(i,C)}),w.append("file",j);const v=await fetch(y.host||y.uploadUrl,{method:"POST",body:w});if(!v.ok){const i=await v.text().catch(()=>"");throw console.error("OSS上传失败响应:",v.status,i),new Error(`OSS上传失败，状态码：${v.status}`)}return y.resourceUrl}const Ul={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},zl={class:"relative min-h-screen flex items-center justify-center p-4"},Al={class:"bg-white w-full max-w-md rounded-lg shadow-xl relative"},Tl={class:"flex items-center justify-between p-4 border-b border-gray-100"},Pl={class:"p-6"},Hl={class:"mb-6"},Rl={key:1},Dl={key:2,class:"text-left"},Fl={class:"flex items-center justify-between"},Ol={class:"text-sm text-gray-600"},ql={class:"mb-6"},Nl={class:"mb-6"},Gl={class:"flex items-center justify-end space-x-4"},Zl=["disabled"],Wl={__name:"CreateDigitalHuman",props:{visible:{type:Boolean,required:!0}},emits:["update:visible","created"],setup(j,{emit:m}){const y=m;Re(),me();const w=ot("showGlobalMessage"),v=n(null),i=n(null),C=n(!1),b=n({name:"",description:""}),$=He(()=>i.value&&b.value.name.trim()),f=()=>{y("update:visible",!1),Z()},z=()=>{v.value.click()},A=h=>{const o=h.target.files[0];o&&T(o)},B=h=>{const o=h.dataTransfer.files[0];o&&T(o)},T=h=>{if(!["video/mp4","video/avi","video/quicktime"].includes(h.type)){alert("请上传正确格式的视频文件");return}if(h.size>104857600){alert("文件大小不能超过100MB");return}i.value=h},P=()=>{i.value=null,v.value&&(v.value.value="")},Z=()=>{b.value={name:"",description:""},i.value=null,v.value&&(v.value.value="")},U=async()=>{var h;if(!i.value){x.warning("请上传文件");return}if(!b.value.name.trim()){x.warning("请输入名称");return}try{C.value=!0;let o="";try{o=await Ct(i.value,"digital-human/videos")}catch(_){x.error("视频上传失败："+_.message);return}const c=await K.post("/api/digital-human/create",{fileUrl:o,name:b.value.name,description:b.value.description||""});if(console.log("创建数字人响应:",c),c&&c.id)y("created",c),f(),w("数字人创建成功！");else throw new Error("创建失败：服务器返回数据格式错误")}catch(o){console.error("创建数字人失败:",o),o.response?alert(((h=o.response.data)==null?void 0:h.message)||"创建失败，请重试"):o.request?alert("无法连接到服务器，请检查网络连接或联系管理员"):alert(o.message||"请求配置错误，请重试")}finally{C.value=!1}};return(h,o)=>j.visible?(s(),l("div",Ul,[e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:f}),e("div",zl,[e("div",Al,[e("div",Tl,[o[3]||(o[3]=e("h3",{class:"text-xl font-medium text-gray-900"},"创建数字人",-1)),e("button",{onClick:f,class:"text-gray-400 hover:text-gray-500"},[M(g(Ie),{class:"w-5 h-5"})])]),e("div",Pl,[e("form",{onSubmit:ce(U,["prevent"])},[e("div",Hl,[o[5]||(o[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"上传视频",-1)),e("div",{class:"border-2 border-dashed border-gray-200 rounded-lg p-6 text-center cursor-pointer",onClick:z,onDragover:o[0]||(o[0]=ce(()=>{},["prevent"])),onDrop:ce(B,["prevent"])},[e("input",{type:"file",ref_key:"fileInput",ref:v,class:"hidden",accept:"video/mp4,video/avi,video/mov",onChange:A},null,544),i.value?S("",!0):(s(),Y(g(Rt),{key:0,class:"w-12 h-12 text-gray-400 mx-auto mb-3"})),i.value?(s(),l("div",Dl,[e("div",Fl,[e("span",Ol,k(i.value.name),1),e("button",{onClick:ce(P,["stop"]),class:"text-gray-400 hover:text-gray-600"},[M(g(Ie),{class:"w-5 h-5"})])])])):(s(),l("div",Rl,o[4]||(o[4]=[e("p",{class:"text-sm text-gray-600 mb-1"},"点击或拖拽视频或图片文件到这里",-1),e("p",{class:"text-xs text-gray-400"},"支持格式：",-1),e("p",{class:"text-xs text-gray-400"},"视频：MP4、AVI、MOV (不超过100MB)",-1),e("p",{class:"text-xs text-gray-400"},"图片：JPG、PNG、JPEG、WEBP (不超过10MB)",-1)])))],32)]),e("div",ql,[o[6]||(o[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"数字人名称",-1)),W(e("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=c=>b.value.name=c),class:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"给你的数字人起个名字"},null,512),[[ie,b.value.name]])]),e("div",Nl,[o[7]||(o[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"描述信息",-1)),W(e("textarea",{"onUpdate:modelValue":o[2]||(o[2]=c=>b.value.description=c),rows:"4",class:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"描述一下这个数字人的特点（选填）"},null,512),[[ie,b.value.description]])]),e("div",Gl,[e("button",{type:"button",onClick:f,class:"px-4 py-2 text-sm text-gray-700 hover:text-gray-900"}," 取消 "),e("button",{type:"submit",disabled:!$.value||C.value,class:"px-4 py-2 bg-primary text-white rounded-lg text-sm hover:bg-primary/90 disabled:opacity-50"}," 创建数字人 ",8,Zl)])],32)])])])])):S("",!0)}};const Jl={class:"min-h-screen bg-[#F7F8FA] p-6"},Yl={class:"max-w-7xl mx-auto"},Kl={class:"flex items-center gap-4 mb-8"},Xl={key:0,class:"grid grid-cols-5 gap-4"},Ql={class:"relative aspect-video mb-4 overflow-hidden rounded-lg bg-gray-100"},er=["src","onError","onLoad"],tr={key:0,class:"absolute inset-0 flex items-center justify-center"},sr={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-100"},or={class:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},lr=["onClick"],rr={class:"w-12 h-12 rounded-full bg-white/90 flex items-center justify-center"},ar={key:0,class:"w-6 h-6 text-gray-900",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nr={key:1,class:"w-6 h-6 text-gray-900",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ir=["src"],dr={class:"flex items-center justify-between mb-3"},ur={class:"text-gray-800 font-medium truncate"},cr={class:"text-xs px-2 py-0.5 bg-green-50 text-green-600 rounded"},vr={class:"text-xs text-gray-500 mb-3"},fr={class:"mt-3 flex items-center space-x-2"},mr=["onClick"],pr=["onClick"],gr={key:1,class:"bg-white rounded-lg p-20"},br={class:"flex flex-col items-center justify-center text-center"},xr={class:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4"},hr={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},yr={class:"bg-white rounded-lg p-6 w-96"},wr={class:"flex justify-end space-x-4"},_r=["disabled"],kr=["disabled"],Cr={key:0},$r={key:1},Mr={__name:"DigitalHuman",setup(j){const m=Re(),y=me(),w=Bl(),v=ot("showGlobalMessage"),i=n([]),C=n(!1),b=n(!1),$=n(!1),f=n(null),z=n(!1),A=_=>Nt(_).format("YYYY-MM-DD HH:mm"),B=_=>{_&&i.value.unshift(_)},T=(_,V)=>{V.imageError=!0,V.imageLoading=!1,console.error("图片加载失败:",V.coverUrl)},P=(_,V)=>{V.imageError=!1,V.imageLoading=!1},Z=async()=>{try{C.value=!0,console.log("开始获取数字人列表...");const _=await K.get("/api/digital-human/list",{params:{userId:y.userId||1}});console.log("获取到的数字人列表响应:",_),i.value=(Array.isArray(_)?_:[]).map(V=>({...V,imageLoading:!1,imageError:!1})),console.log("设置后的digitalHumans:",i.value)}catch(_){console.error("获取数字人列表失败:",_),i.value=[]}finally{C.value=!1}},U=_=>{f.value=_,$.value=!0},h=async()=>{try{z.value=!0;const _=await K.delete(`/api/digital-human/${f.value}`);if(_.code===200)await Z(),$.value=!1,v("删除成功");else throw new Error(_.message||"删除失败")}catch(_){console.error("删除数字人失败:",_),v(_.message||"删除失败，请重试","error")}finally{z.value=!1}},o=_=>{i.value.forEach(V=>{V.id!==_.id&&(V.isPlaying=!1)}),_.isPlaying=!_.isPlaying},c=_=>{w.setCurrentDigitalHuman(_.id,_.videoUrl),m.push("/create")};return xe(()=>{Z(),window.addEventListener("refresh-digital-humans",Z)}),Se(()=>{window.removeEventListener("refresh-digital-humans",Z)}),(_,V)=>(s(),l("div",Jl,[e("div",Yl,[V[9]||(V[9]=e("h1",{class:"text-2xl font-medium text-gray-800 mb-6"},"我的数字人",-1)),e("div",Kl,[e("button",{onClick:V[0]||(V[0]=D=>b.value=!0),class:"inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors"},[M(g(Dt),{class:"w-5 h-5 mr-2"}),V[3]||(V[3]=R(" 创建数字人 "))])]),i.value.length>0?(s(),l("div",Xl,[(s(!0),l(oe,null,de(i.value,D=>(s(),l("div",{key:D.id,class:"bg-white rounded-lg p-4 cursor-pointer hover:shadow-md transition-all duration-300 group"},[e("div",Ql,[e("img",{src:D.coverUrl,alt:"",class:"object-cover w-full h-full",onError:I=>T(I,D),onLoad:I=>P(I,D)},null,40,er),D.imageLoading?(s(),l("div",tr,V[4]||(V[4]=[e("div",{class:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"},null,-1)]))):S("",!0),D.imageError?(s(),l("div",sr,[M(g(Ft),{class:"w-12 h-12 text-gray-400"})])):S("",!0),e("div",or,[e("button",{onClick:I=>o(D),class:"w-20 h-20 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center hover:bg-white/20 transition-all duration-300 transform hover:scale-110"},[e("div",rr,[D.isPlaying?(s(),l("svg",nr,V[6]||(V[6]=[e("path",{d:"M6 19H10V5H6V19ZM14 5V19H18V5H14Z",fill:"currentColor"},null,-1)]))):(s(),l("svg",ar,V[5]||(V[5]=[e("path",{d:"M8 5.14V19.14L19 12.14L8 5.14Z",fill:"currentColor"},null,-1)])))])],8,lr)]),D.isPlaying?(s(),l("video",{key:2,src:D.videoUrl,class:"absolute inset-0 w-full h-full object-cover",autoplay:"",controls:""},null,8,ir)):S("",!0)]),e("div",dr,[e("h3",ur,k(D.name),1),e("span",cr,k(D.status),1)]),e("div",vr,"创建时间："+k(A(D.createTime)),1),e("div",fr,[e("button",{onClick:I=>c(D),class:"flex-1 px-3 py-2 bg-primary/10 text-primary text-sm rounded hover:bg-primary/20"}," 使用此数字人 ",8,mr),e("button",{onClick:I=>U(D.id),class:"p-1.5 text-gray-400 hover:text-red-500 transition-colors"},[M(g(Ot),{class:"w-5 h-5"})],8,pr)])]))),128))])):(s(),l("div",gr,[e("div",br,[e("div",xr,[M(g(qt),{class:"w-12 h-12 text-gray-400"})]),V[7]||(V[7]=e("div",{class:"text-xl text-gray-800 font-medium mb-2"},"还没有数字人",-1)),V[8]||(V[8]=e("div",{class:"text-gray-500"},"点击上方按钮开始创建吧",-1))])]))]),M(Wl,{visible:b.value,"onUpdate:visible":V[1]||(V[1]=D=>b.value=D),onCreated:B},null,8,["visible"]),$.value?(s(),l("div",hr,[e("div",yr,[V[10]||(V[10]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"确认删除",-1)),V[11]||(V[11]=e("p",{class:"text-gray-500 mb-6"},"确定要删除这个数字人吗？此操作不可恢复。",-1)),e("div",wr,[e("button",{onClick:V[2]||(V[2]=D=>$.value=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800",disabled:z.value}," 取消 ",8,_r),e("button",{onClick:h,class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",disabled:z.value},[z.value?(s(),l("span",Cr,"删除中...")):(s(),l("span",$r,"确认删除"))],8,kr)])])])):S("",!0)]))}},jr=je(Mr,[["__scopeId","data-v-9db13a53"]]);const Vr={class:"container mx-auto px-4 py-8"},Lr={class:"flex border-b border-gray-200 mb-8"},Er={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Ir={class:"flex items-center"},Br=["onClick"],Sr={key:0,class:"w-0 h-0 border-t-[8px] border-t-transparent border-l-[12px] border-l-blue-600 border-b-[8px] border-b-transparent ml-1"},Ur={key:1,class:"fas fa-pause text-blue-600 text-lg"},zr={class:"text-gray-900 font-medium text-base"},Ar={class:"text-gray-500 text-sm mt-1"},Tr={class:"absolute top-6 right-6 flex items-center space-x-2 z-10"},Pr=["onClick"],Hr={class:"relative"},Rr=["onClick"],Dr={key:0,class:"absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg py-2 z-10 border border-gray-100"},Fr=["onClick"],Or=["onClick"],qr={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Nr={class:"flex-shrink-0"},Gr=["onClick"],Zr={class:"flex-1 min-w-0"},Wr={class:"flex items-center space-x-2"},Jr={class:"text-gray-900 font-medium truncate"},Yr={class:"flex items-center"},Kr={class:"flex items-center space-x-2"},Xr=["onClick"],Qr=["onClick"],ea={key:1,class:"text-center py-20 bg-white rounded-xl col-span-full shadow-sm border border-gray-100"},ta={class:"mb-4 text-blue-200"},sa={class:"mt-16"},oa={class:"flex space-x-4 mb-8 overflow-x-auto pb-2 scrollbar-hide"},la=["onClick"],ra={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},aa={class:"flex-shrink-0"},na=["onClick"],ia={class:"flex-1 min-w-0"},da={class:"flex items-center space-x-2"},ua={class:"text-gray-900 font-medium truncate"},ca={class:"flex items-center"},va={class:"flex items-center space-x-2"},fa=["onClick"],ma=["onClick"],pa={key:1,class:"text-center py-20 bg-white rounded-xl col-span-full shadow-sm border border-gray-100"},ga={key:2,class:"fixed inset-0 z-50 flex items-center justify-center"},ba={class:"relative bg-white rounded-xl w-[600px] shadow-2xl overflow-hidden"},xa={class:"px-6"},ha={key:0,class:"mb-6"},ya={key:1},wa={class:"mb-4"},_a={class:"flex items-center justify-between mb-2"},ka={class:"text-gray-900 break-all pr-2 flex-1"},Ca={class:"flex items-center"},$a={key:0,class:"w-6 h-6"},Ma={key:1,class:"w-6 h-6"},ja={class:"flex-1"},Va={class:"bg-gray-200 h-1.5 rounded-full"},La={class:"flex justify-between text-xs text-gray-500 mt-1"},Ea={class:"mb-4"},Ia={class:"text-gray-600"},Ba={class:"mb-4"},Sa={class:"flex items-center mb-6"},Ua={class:"flex justify-end py-6 border-t mt-4"},za=["disabled"],Aa={class:"dialog-footer"},Ta={__name:"VoiceClone",setup(j){const m=Re(),y=me(),w=n(!1),v=n(null),i=n("my");n("all");const C=n([]),b=n([]),$=n([]),f=n(null),z=n(!1),A=n(""),B=n(!1),T=n({}),P=n({}),Z=n(!1),U=n(!1),h=n(0),o=n(0),c=n(0),_=n(null),V=n(null),D=n(!1),I=n(null),se=n(""),re=n(!0),pe=He(()=>z.value&&A.value.trim()&&B.value),ge=()=>{w.value=!1,X()},X=()=>{v.value=null,z.value=!1,A.value="",B.value=!1,Z.value=!1,U.value=!1,h.value=0,o.value=0,c.value=0,_.value&&(_.value.pause(),_.value=null)},ve=p=>{const r=p.dataTransfer.files[0];r&&we(r)},he=p=>{const r=p.target.files[0];r&&we(r)},we=p=>{if(p.size>150*1024*1024){x.warning("文件大小不能超过150MB");return}if(!["audio/mpeg","audio/wav","video/mp4"].includes(p.type)){x.warning("只支持MP3、WAV、MP4格式");return}v.value=p,z.value=!0,_.value&&_.value.pause(),_.value=new Audio(URL.createObjectURL(p)),_.value.addEventListener("loadedmetadata",()=>{if(o.value=_.value.duration,o.value<5){x.warning("音频时长不能少于5秒"),X();return}if(o.value>300){x.warning("音频时长不能超过5分钟"),X();return}}),_.value.addEventListener("timeupdate",()=>{h.value=_.value.currentTime,c.value=h.value/o.value*100})},Ue=()=>{_.value&&(Z.value?_.value.pause():_.value.play(),Z.value=!Z.value)},_e=p=>{const r=Math.floor(p/60),F=Math.floor(p%60);return`${r}:${F.toString().padStart(2,"0")}`},ze=async()=>{if(!pe.value)return;let p="";if(v.value)try{p=await Ct(v.value,"voice-clone/audios")}catch(r){console.error("文件上传失败",r);return}await K.post("/api/voice-clone/create",{name:A.value,fileUrl:p}),x.success("声音克隆创建成功"),ge(),await Q()},Q=async()=>{var p,r;try{console.log("开始获取我的声音列表"),console.log("当前用户ID:",(p=y.user)==null?void 0:p.id);const F=await K.get("/api/voice-clone/list",{params:{userId:(r=y.user)==null?void 0:r.id,type:"my"}});console.log("API返回的原始数据:",F);const N=F||[];console.log("处理后的声音列表数据:",N),C.value=N.map(G=>({...G,type:"中文"})),console.log("最终设置到视图的数据:",C.value)}catch(F){console.error("获取声音列表失败:",F),C.value=[]}},ue=async()=>{try{const p=await K.get("/api/voice/favorite/list");b.value=p||[]}catch(p){console.error("获取收藏列表失败:",p),b.value=[]}},H=async()=>{var p;try{const r=await K.get("/api/voice-clone/list",{params:{userId:(p=y.user)==null?void 0:p.id,type:"public"}});$.value=Array.isArray(r.data)?r.data:[]}catch(r){console.error("获取公共配音列表失败:",r),$.value=[]}},a=async p=>{try{await K.delete(`/api/voice-clone/${p}`),x.success("删除成功"),Q()}catch{x.error("删除失败")}},ae=async p=>{var r;if(!((r=y.user)!=null&&r.id)){x.warning("请先登录");return}try{p.isFavorite?(await K.delete(`/api/voice/favorite/${p.id}`),x.success("取消收藏成功"),p.isFavorite=!1):(await K.post(`/api/voice/favorite/${p.id}`),x.success("收藏成功"),p.isFavorite=!0),i.value==="favorite"&&ue()}catch(F){x.error(F.message||"操作失败")}},le=()=>{f.value.click()},ee=p=>{if(!re.value)return;const r=typeof p=="string"?{id:`url_${btoa(p)}`,voiceUrl:p}:{...p,voiceUrl:p.voiceUrl};if(!r.voiceUrl){console.error("音频URL不存在:",r),x.error("音频文件不存在");return}if(Object.entries(P.value).forEach(([N,G])=>{if(N!==r.id)try{G.pause(),G.currentTime=0,T.value[N]=!1}catch(be){console.error("停止其他音频时出错:",be)}}),!P.value[r.id]){const N=new Audio(r.voiceUrl),G=()=>{re.value&&(T.value[r.id]=!1)},be=()=>{re.value&&(console.error("音频加载失败:",r.voiceUrl),T.value[r.id]=!1,x.error("音频加载失败"))};N.addEventListener("ended",G),N.addEventListener("error",be),P.value[r.id]=N}const F=P.value[r.id];if(T.value[r.id])try{F.pause(),F.currentTime=0,T.value[r.id]=!1}catch(N){console.error("暂停音频时出错:",N)}else try{F.play().catch(N=>{re.value&&(console.error("播放失败:",N),T.value[r.id]=!1,x.error("播放失败"))}),T.value[r.id]=!0}catch(N){if(!re.value)return;console.error("播放出错:",N),T.value[r.id]=!1,x.error("播放出错")}},fe=p=>{V.value=V.value===p?null:p},L=p=>{I.value=p,se.value=p.name,D.value=!0,V.value=null},Ve=async()=>{if(!se.value.trim()){x.warning("名称不能为空");return}try{await K.patch(`/api/voice-clone/${I.value.id}?name=${encodeURIComponent(se.value.trim())}`),x.success("重命名成功"),await Q(),D.value=!1}catch(p){x.error(p.message||"重命名失败")}},ke=p=>{m.push({path:"/voice-create",query:{voiceId:p.voiceId,voiceName:p.name}})};Se(()=>{re.value=!1,Object.entries(P.value).forEach(([p,r])=>{try{r.pause(),r.src="",r.removeEventListener("ended",()=>{}),r.removeEventListener("error",()=>{}),T.value[p]=!1}catch(F){console.error("清理音频资源时出错:",F)}}),P.value={},T.value={},_.value&&(_.value.pause(),_.value=null),document.removeEventListener("click",()=>{})}),xe(()=>{console.log("组件挂载，开始获取数据"),Ke(),Ce("all"),Q(),ue(),H(),document.addEventListener("click",p=>{p.target.closest(".relative")||(V.value=null)})}),ne(i,p=>{p==="my"&&Q()});const De=n([]),Le=n([]),Fe=n("all"),Ae=n(!1),Ke=async()=>{try{const p=await K.get("/api/voice/categories");De.value=[{id:"all",name:"全部"},{id:"hot",name:"热门"},...p]}catch{x.error("获取分类失败")}},Ce=async p=>{Ae.value=!0;try{console.log("开始获取音色列表, 分类ID:",p);let r="/api/voice/list";p==="hot"?r="/api/voice/hot":p!=="all"&&(r=`/api/voice/list/${p}`),console.log("请求URL:",r);const F=await K.get(r);console.log("获取到的音色列表:",F);const N=await K.get("/api/voice/favorite/status",{params:{voiceIds:F.map(G=>G.id).join(",")}});Le.value=F.map(G=>({...G,isFavorite:N[G.id]||!1}))}catch(r){console.error("获取音色列表失败:",r),x.error("获取音色列表失败"),Le.value=[]}finally{Ae.value=!1}},Ee=p=>{console.log("切换分类:",p),Fe.value=p,Ce(p)},ye=async()=>{i.value="favorite",b.value.length===0&&await ue()};return(p,r)=>{const F=yt,N=Zt,G=wt,be=at,Xe=Wt;return s(),l("div",Vr,[r[31]||(r[31]=e("h1",{class:"text-3xl font-bold mb-8 text-gray-900 flex items-center"},[e("span",{class:"bg-gradient-to-r from-blue-500 to-blue-600 bg-clip-text text-transparent"},"声音克隆"),e("span",{class:"ml-3 text-sm font-normal px-3 py-1 bg-blue-50 text-blue-600 rounded-full"},"专业定制，精准还原")],-1)),e("div",Lr,[e("button",{onClick:r[0]||(r[0]=E=>i.value="my"),class:O(["px-8 py-4 text-base font-medium relative transition-colors duration-300",i.value==="my"?"text-blue-600":"text-gray-600 hover:text-gray-900"])},[r[8]||(r[8]=R(" 我的声音 ")),e("div",{class:O(["absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 transform transition-transform duration-300",i.value==="my"?"scale-x-100":"scale-x-0"])},null,2)],2),e("button",{onClick:ye,class:O(["px-8 py-4 text-base font-medium relative flex items-center transition-colors duration-300",i.value==="favorite"?"text-blue-600":"text-gray-600 hover:text-gray-900"])},[M(F,{class:"mr-1",size:16},{default:J(()=>[i.value!=="favorite"?(s(),Y(g(Qe),{key:0})):(s(),Y(g(et),{key:1}))]),_:1}),r[9]||(r[9]=R(" 收藏 ")),e("div",{class:O(["absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 transform transition-transform duration-300",i.value==="favorite"?"scale-x-100":"scale-x-0"])},null,2)],2)]),i.value==="my"?(s(),l("div",Er,[e("div",{onClick:r[1]||(r[1]=E=>w.value=!0),class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 cursor-pointer hover:shadow-lg transition-all duration-300 flex items-center group relative border border-blue-100 overflow-hidden"},r[10]||(r[10]=[Me('<div class="absolute right-0 bottom-0 w-20 h-20 rounded-full bg-blue-200 opacity-50 -mr-6 -mb-6" data-v-b7f7e5a8></div><div class="w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center mr-4 shadow-md group-hover:shadow-lg transition-all duration-300" data-v-b7f7e5a8><span class="text-white text-2xl font-bold leading-none" data-v-b7f7e5a8>+</span></div><div class="relative z-10" data-v-b7f7e5a8><div class="text-gray-900 font-medium text-base" data-v-b7f7e5a8>新增克隆声音</div><div class="text-blue-600 text-sm mt-1" data-v-b7f7e5a8>3s极速克隆声音</div></div>',3)])),(s(!0),l(oe,null,de(C.value,E=>(s(),l("div",{key:E.id,class:"bg-white rounded-xl p-6 group relative shadow-sm hover:shadow-md transition-all duration-300 border border-gray-100"},[e("div",Ir,[e("button",{onClick:te=>ee(E),class:"w-12 h-12 rounded-full bg-blue-50 flex items-center justify-center mr-4 group-hover:bg-blue-100 transition-all duration-300 relative shadow-sm"},[T.value[E.id]?(s(),l("i",Ur)):(s(),l("div",Sr))],8,Br),e("div",null,[e("div",zr,k(E.name),1),e("div",Ar,k(E.type),1)]),e("div",Tr,[e("button",{class:"opacity-0 group-hover:opacity-100 transition-all duration-300 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-1.5 rounded-full text-sm shadow-md hover:shadow-lg transform hover:-translate-y-0.5 active:translate-y-0",onClick:te=>ke(E)}," 去创作 ",8,Pr),e("div",Hr,[e("button",{onClick:te=>fe(E.id),class:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors"},r[11]||(r[11]=[e("div",{class:"flex space-x-0.5"},[e("div",{class:"w-1 h-1 rounded-full bg-current"}),e("div",{class:"w-1 h-1 rounded-full bg-current"}),e("div",{class:"w-1 h-1 rounded-full bg-current"})],-1)]),8,Rr),V.value===E.id?(s(),l("div",Dr,[e("button",{onClick:te=>L(E),class:"w-full px-4 py-2 text-left text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors flex items-center"},r[12]||(r[12]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),R(" 重命名 ")]),8,Fr),e("button",{onClick:te=>a(E.id),class:"w-full px-4 py-2 text-left text-red-600 hover:bg-red-50 transition-colors flex items-center"},r[13]||(r[13]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),R(" 删除 ")]),8,Or)])):S("",!0)])])])]))),128))])):(s(),l("div",qr,[b.value.length>0?(s(!0),l(oe,{key:0},de(b.value,E=>(s(),l("div",{key:E.id,class:"bg-white rounded-xl p-5 flex items-start space-x-4 hover:shadow-md transition-all duration-300 group border border-gray-100"},[e("div",Nr,[e("button",{onClick:te=>ee(E.voiceUrl),class:"w-12 h-12 rounded-full bg-blue-50 flex items-center justify-center group-hover:bg-blue-100 transition-all duration-300 relative shadow-sm"},r[14]||(r[14]=[e("div",{class:"w-0 h-0 border-t-[8px] border-t-transparent border-l-[12px] border-l-blue-600 border-b-[8px] border-b-transparent ml-1"},null,-1)]),8,Gr)]),e("div",Zr,[e("div",Wr,[e("h3",Jr,k(E.name),1),e("div",Yr,[M(F,{size:16,color:E.gender===1?"#3b82f6":"#ec4899"},{default:J(()=>[E.gender===1?(s(),Y(g(mt),{key:0})):(s(),Y(g(pt),{key:1}))]),_:2},1032,["color"])])]),r[15]||(r[15]=e("div",{class:"text-gray-500 text-sm mt-1"},"中文",-1))]),e("div",Kr,[e("button",{onClick:te=>ae(E),class:"p-2 rounded-full hover:bg-blue-50 transition-colors text-blue-600"},[M(F,{size:20},{default:J(()=>[M(g(et))]),_:1})],8,Xr),e("button",{class:"px-4 py-1.5 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm hover:shadow-md transition-all duration-300 transform hover:-translate-y-0.5 active:translate-y-0",onClick:te=>ke(E)}," 去创作 ",8,Qr)])]))),128)):(s(),l("div",ea,[e("div",ta,[M(F,{size:64},{default:J(()=>[M(g(Qe))]),_:1})]),r[16]||(r[16]=e("p",{class:"text-gray-500"},"暂无收藏的声音",-1))]))])),e("div",sa,[r[20]||(r[20]=e("h2",{class:"text-2xl font-bold mb-8 text-gray-900 flex items-center"},[e("span",{class:"bg-gradient-to-r from-blue-500 to-blue-600 bg-clip-text text-transparent"},"公共配音")],-1)),e("div",oa,[(s(!0),l(oe,null,de(De.value,E=>(s(),l("button",{key:E.id,onClick:te=>Ee(E.id),class:O(["px-5 py-2.5 rounded-full transition-all duration-300 whitespace-nowrap font-medium text-sm",[Fe.value===E.id?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200 hover:border-blue-300"]])},k(E.name),11,la))),128))]),W((s(),l("div",ra,[Le.value.length>0?(s(!0),l(oe,{key:0},de(Le.value,E=>(s(),l("div",{key:E.id,class:"bg-white rounded-xl p-5 flex items-start space-x-4 hover:shadow-md transition-all duration-300 group border border-gray-100"},[e("div",aa,[e("button",{onClick:te=>ee(E.voiceUrl),class:"w-12 h-12 rounded-full bg-blue-50 flex items-center justify-center group-hover:bg-blue-100 transition-all duration-300 relative shadow-sm"},r[17]||(r[17]=[e("div",{class:"w-0 h-0 border-t-[8px] border-t-transparent border-l-[12px] border-l-blue-600 border-b-[8px] border-b-transparent ml-1"},null,-1)]),8,na)]),e("div",ia,[e("div",da,[e("h3",ua,k(E.name),1),e("div",ca,[M(F,{size:16,color:E.gender===1?"#3b82f6":"#ec4899"},{default:J(()=>[E.gender===1?(s(),Y(g(mt),{key:0})):(s(),Y(g(pt),{key:1}))]),_:2},1032,["color"])])]),r[18]||(r[18]=e("div",{class:"text-gray-500 text-sm mt-1"},"中文",-1))]),e("div",va,[e("button",{onClick:te=>ae(E),class:O(["p-2 rounded-full hover:bg-blue-50 transition-colors",{"text-blue-600":E.isFavorite,"text-gray-400":!E.isFavorite}])},[M(F,{size:20},{default:J(()=>[E.isFavorite?(s(),Y(g(et),{key:1})):(s(),Y(g(Qe),{key:0}))]),_:2},1024)],10,fa),e("button",{class:"px-4 py-1.5 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm hover:shadow-md transition-all duration-300 transform hover:-translate-y-0.5 active:translate-y-0",onClick:te=>ke(E)}," 去创作 ",8,ma)])]))),128)):(s(),l("div",pa,r[19]||(r[19]=[e("div",{class:"mb-4 text-blue-200"},[e("svg",{class:"w-16 h-16 mx-auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-4h2v2h-2zm1-10c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z",fill:"currentColor"})])],-1),e("p",{class:"text-gray-500"},"暂无配音数据",-1)])))])),[[Xe,Ae.value]])]),w.value?(s(),l("div",ga,[e("div",{class:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:ge}),e("div",ba,[e("div",{class:"flex justify-between items-center p-6 pb-4 border-b"},[r[22]||(r[22]=e("h3",{class:"text-xl font-semibold text-gray-900"},"上传音频",-1)),e("button",{onClick:ge,class:"p-2 rounded-full hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors"},r[21]||(r[21]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),r[28]||(r[28]=e("div",{class:"mx-6 mt-6 bg-blue-50 rounded-lg p-4 mb-4 flex items-start border border-blue-100"},[e("svg",{class:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-gray-700 ml-3"},"如何让复刻的声音效果更好？")],-1)),e("div",xa,[z.value?(s(),l("div",ya,[e("div",wa,[e("div",_a,[e("p",ka,k(v.value.name),1),e("button",{onClick:X,class:"inline-flex items-center justify-center p-1 hover:bg-gray-100 rounded-full transition-colors",title:"取消上传"},r[24]||(r[24]=[e("svg",{class:"w-4 h-4 text-gray-400 hover:text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M6 18L18 6M6 6l12 12","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),e("div",Ca,[e("button",{class:"relative w-12 h-12 bg-white border-2 border-blue-500 rounded-lg text-blue-500 flex items-center justify-center hover:bg-blue-50 transition-colors mr-4 group shadow-sm",onClick:Ue},[Z.value?(s(),l("div",Ma,r[26]||(r[26]=[e("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})],-1)]))):(s(),l("div",$a,r[25]||(r[25]=[e("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M8 5v14l11-7z"})],-1)])))]),e("div",ja,[e("div",Va,[e("div",{class:"bg-blue-500 h-full rounded-full",style:_t({width:c.value+"%"})},null,4)]),e("div",La,[e("span",null,k(_e(h.value)),1),e("span",null,k(_e(o.value)),1)])])])]),e("div",Ea,[e("p",Ia,"已上传："+k(_e(o.value)),1)]),e("div",Ba,[W(e("input",{type:"text","onUpdate:modelValue":r[3]||(r[3]=E=>A.value=E),placeholder:"请输入声音名称",class:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 text-base transition-colors"},null,512),[[ie,A.value]])]),e("div",Sa,[W(e("input",{type:"checkbox",id:"agreement","onUpdate:modelValue":r[4]||(r[4]=E=>B.value=E),class:"rounded text-blue-500 focus:ring-blue-500 focus:ring-offset-0"},null,512),[[st,B.value]]),r[27]||(r[27]=e("label",{for:"agreement",class:"ml-2 text-gray-600 text-sm"},[R(" 我已阅读并同意 "),e("a",{href:"#",class:"text-blue-500 hover:text-blue-600 hover:underline"},"使用者承诺")],-1))])])):(s(),l("div",ha,[e("div",{class:"border-2 border-dashed border-gray-200 rounded-xl p-8 text-center cursor-pointer hover:border-blue-500 transition-colors",onClick:le,onDragover:r[2]||(r[2]=ce(()=>{},["prevent"])),onDrop:ce(ve,["prevent"])},[e("input",{type:"file",accept:"audio/*,video/mp4",onChange:he,class:"hidden",ref_key:"fileInput",ref:f},null,544),r[23]||(r[23]=Me('<div class="flex flex-col items-center" data-v-b7f7e5a8><svg class="w-16 h-16 text-blue-100 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-b7f7e5a8><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" data-v-b7f7e5a8></path></svg><p class="text-gray-700 mb-2 font-medium" data-v-b7f7e5a8>点击上传/拖拽音频或视频文件到这里</p><p class="text-sm text-gray-500" data-v-b7f7e5a8>支持mp3/wav/mp4格式，文件大小不超过150MB</p><p class="text-sm text-gray-500 mt-1" data-v-b7f7e5a8>最短5s，最长5min，建议30s左右</p></div>',1))],32)])),e("div",Ua,[e("button",{onClick:ze,class:"px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed text-base transition-all duration-300 transform hover:-translate-y-0.5 active:translate-y-0",disabled:!pe.value}," 立即复刻 ",8,za)])])])])):S("",!0),M(be,{modelValue:D.value,"onUpdate:modelValue":r[7]||(r[7]=E=>D.value=E),title:"重命名",width:"400px","close-on-click-modal":!1,"show-close":!0,class:"rename-dialog"},{footer:J(()=>[e("span",Aa,[M(G,{onClick:r[6]||(r[6]=E=>D.value=!1)},{default:J(()=>r[29]||(r[29]=[R("取消")])),_:1}),M(G,{type:"primary",color:"#3b82f6",onClick:Ve},{default:J(()=>r[30]||(r[30]=[R(" 确认 ")])),_:1})])]),default:J(()=>[M(N,{modelValue:se.value,"onUpdate:modelValue":r[5]||(r[5]=E=>se.value=E),placeholder:"请输入新的名称",onKeyup:Gt(Ve,["enter"])},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}},Pa=je(Ta,[["__scopeId","data-v-b7f7e5a8"]]);const Ha={class:"fixed inset-0 z-50 flex flex-row w-screen h-screen bg-gradient-to-br from-blue-100/90 via-white/90 to-blue-100/90 backdrop-blur-xl"},Ra={class:"w-[420px] h-full flex flex-col items-center justify-center bg-gradient-to-b from-white to-blue-50/30 border-r border-gray-100 p-10"},Da={class:"w-full"},Fa={class:"flex items-center justify-between bg-gradient-to-r from-blue-50 to-blue-100 rounded-2xl p-5 shadow-lg border border-blue-200/40 mb-8"},Oa={class:"flex items-center"},qa={class:"ml-4"},Na={class:"font-bold text-xl text-gray-800"},Ga={class:"mb-8"},Za={class:"relative"},Wa={class:"absolute bottom-4 right-5 text-sm font-medium text-gray-400 bg-white/80 px-2 py-1 rounded-lg backdrop-blur-sm"},Ja={class:"mb-8"},Ya={class:"relative mb-5"},Ka={class:"flex-1 h-full flex flex-col items-center justify-center bg-gradient-to-b from-white to-blue-50/40 relative p-12"},Xa={key:"empty",class:"flex flex-col items-center justify-center"},Qa={key:"generating",class:"flex flex-col items-center justify-center"},en={key:"player",class:"flex flex-col items-center"},tn={class:"w-[550px] bg-white rounded-3xl shadow-2xl flex flex-col items-center p-10 animate-fade-in relative mb-8 border border-gray-100"},sn={class:"w-72 h-72 rounded-full bg-gradient-to-br from-blue-50 to-blue-100 flex items-center justify-center mb-8 relative"},on={key:0,viewBox:"0 0 24 24",class:"w-16 h-16 text-white"},ln={key:1,viewBox:"0 0 24 24",class:"w-16 h-16 text-white"},rn={class:"absolute inset-0 w-full h-full",viewBox:"0 0 100 100"},an=["stroke-dashoffset"],nn={class:"text-center mb-8 w-full"},dn={class:"text-2xl font-bold text-gray-800 mb-3 truncate"},un={class:"text-base text-gray-400 mb-5"},cn={class:"w-full h-3 bg-gray-100 rounded-full overflow-hidden relative"},vn=["src"],fn={class:"flex items-center text-gray-500 text-base"},mn={class:"w-[420px] h-full flex flex-col bg-white/90 rounded-l-3xl shadow-2xl border-l border-blue-100 p-10 overflow-y-auto"},pn={class:"flex-1 overflow-y-auto pr-2 custom-scrollbar"},gn={key:0,class:"text-gray-400 text-center py-8 bg-gray-50 rounded-xl"},bn={key:1,class:"space-y-6"},xn={class:"flex items-center mb-2 w-full"},hn={class:"font-bold text-lg text-gray-800 truncate"},yn={class:"text-gray-400 text-sm mb-2"},wn=["src","onEnded","onTimeupdate"],_n={class:"flex items-center space-x-3 mt-2"},kn=["onClick"],Cn={key:0,viewBox:"0 0 24 24",class:"w-7 h-7 text-white"},$n={key:1,viewBox:"0 0 24 24",class:"w-7 h-7 text-white"},Mn=["onClick"],jn={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Vn={class:"relative bg-white rounded-xl w-[900px] h-[600px] overflow-hidden flex flex-col"},Ln={class:"flex justify-between items-center p-6 border-b border-gray-200"},En={class:"flex-1 overflow-hidden flex"},In={class:"w-48 bg-gray-50 p-4 overflow-y-auto"},Bn={class:"mb-6"},Sn=["onClick"],Un={class:"flex-1 p-6 overflow-y-auto"},zn={key:0,class:"flex items-center justify-center h-full"},An={key:1,class:"flex flex-col items-center justify-center h-full text-gray-500"},Tn={key:2,class:"grid grid-cols-2 gap-4"},Pn=["onClick"],Hn={class:"flex items-start"},Rn={class:"flex-1"},Dn={class:"flex items-center justify-between"},Fn={class:"font-bold text-gray-800"},On={class:"flex items-center space-x-1"},qn=["onClick"],Nn=["onClick"],Gn={key:0,class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none"},Zn={key:1,class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none"},Wn={class:"text-sm text-gray-500"},Jn={key:0,class:"mt-2 text-sm text-blue-500 font-medium"},Yn={class:"p-6 border-t border-gray-200 flex justify-end space-x-4"},Kn=["disabled"],Xn={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30"},Qn={class:"relative w-full max-w-[680px] mx-auto rounded-3xl shadow-lg overflow-hidden"},ei={class:"bg-white rounded-3xl px-10 pt-8 pb-8 flex flex-col border border-gray-100"},ti={key:0,class:"flex flex-col gap-6"},si={class:"text-xs text-gray-400 mt-1 text-right"},oi={class:"flex gap-4"},li={class:"flex-1"},ri={class:"select-container"},ai={class:"flex-1"},ni={class:"select-container"},ii=["value"],di={key:0,class:"text-red-500 text-sm text-center"},ui=["disabled"],ci={key:0,class:"flex items-center"},vi={key:1},fi={key:1,class:"flex flex-col gap-4"},mi={class:"flex items-center justify-between mb-2"},pi={class:"divide-y divide-gray-100 rounded-xl overflow-hidden bg-white border border-gray-100 max-h-[500px] overflow-y-auto custom-scrollbar"},gi={class:"flex items-center gap-2 mb-1"},bi={class:"inline-block w-7 h-7 rounded-full bg-gray-100 text-gray-600 font-bold flex items-center justify-center"},xi={class:"font-semibold text-gray-700 text-base"},hi={class:"text-gray-700 mb-3 whitespace-pre-line leading-relaxed text-base"},yi={class:"flex gap-2 justify-end"},wi=["onClick"],_i=["onClick"],ki={key:0,class:"flex items-center"},Ci={key:1},$i={__name:"VoiceCreation",setup(j){const m=me(),y=n(""),w=n(""),v=n(!1),i=n(!1),C=n(0),b=n(null),$=n(""),f=n(""),z=n(""),A=n(null),B=n(null),T=n([]),P=n({});n([]);const Z=async()=>{try{const t=await(await fetch("/api/voice-synthesis-record/list",{method:"GET",headers:{Authorization:`Bearer ${m.token}`}})).json();t.code===200?(console.log("获取历史记录成功:",t.data),T.value=(t.data||[]).map(d=>(console.log("处理记录:",d.id,"音频URL:",d.voiceUrl),{id:d.id,name:d.fileName,url:d.voiceUrl,createdAt:d.createTime,duration:"00:30",text:d.textContent})),console.log("处理后的历史列表:",T.value)):(console.error("获取历史记录失败:",t.message),x.error("获取历史记录失败: "+t.message))}catch(u){console.error("获取历史记录失败:",u),x.error("获取历史记录失败: "+u.message)}};xe(()=>{const u=lt();$.value=u.query.voiceId||"",f.value=u.query.voiceName||"",Z()});const U=n(!1),h=gt(async()=>{if(!y.value.trim()){x({message:"请输入要合成的文本内容",type:"warning",customClass:"custom-message"});return}if(!w.value.trim()){x({message:"请输入声音名称",type:"warning",customClass:"custom-message"});return}try{U.value=!0,v.value=!0;const t=await(await fetch("/api/voice/synthesize",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m.token}`},body:JSON.stringify({textContent:y.value,fileName:w.value,voiceId:$.value})})).json();if(t.code===200)A.value=t.data.id,z.value="1",c();else throw new Error(t.message)}catch(u){U.value=!1,v.value=!1,x({message:u.message||"语音生成失败",type:"error",customClass:"custom-message"})}},300),o=()=>{h()},c=()=>{B.value&&clearInterval(B.value),B.value=setInterval(async()=>{if(A.value)try{const t=await(await fetch(`/api/voice/status/${A.value}`,{headers:{Authorization:`Bearer ${m.token}`}})).json();if(t.code===200){const d=t.data;z.value=d.status,d.status==="2"?(clearInterval(B.value),U.value=!1,requestAnimationFrame(()=>{P.value={id:d.id,name:d.fileName,duration:"00:05",url:d.voiceUrl,createdAt:d.createTime}}),await Yt(),b.value&&(b.value.src=d.voiceUrl,_()),await Z(),x({message:"语音生成成功",type:"success",customClass:"custom-message"})):d.status==="3"&&(clearInterval(B.value),U.value=!1,v.value=!1,x({message:d.errorMessage||"语音生成失败",type:"error",customClass:"custom-message"}))}}catch(u){console.error("检查状态失败:",u),clearInterval(B.value),U.value=!1,v.value=!1,x({message:"检查生成状态失败",type:"error",customClass:"custom-message"})}},3e3)};Se(()=>{B.value&&clearInterval(B.value)});const _=()=>{b.value&&(b.value.paused||(b.value.pause(),i.value=!1),b.value.currentTime=0,b.value.addEventListener("canplaythrough",()=>{b.value.play().catch(u=>{console.error("播放音频失败:",u),x.error("播放失败: "+u.message)}),i.value=!0},{once:!0}))},V=()=>{b.value&&requestAnimationFrame(()=>{b.value.paused?b.value.readyState>=3?(b.value.play().catch(u=>{console.error("播放音频失败:",u),x.error("播放失败: "+u.message)}),i.value=!0):b.value.addEventListener("canplaythrough",()=>{b.value.play().catch(u=>{console.error("播放音频失败:",u),x.error("播放失败: "+u.message)}),i.value=!0},{once:!0}):(b.value.pause(),i.value=!1)})},D=()=>{b.value&&(b.value.paused||b.value.pause(),b.value.currentTime=0,b.value.addEventListener("canplaythrough",()=>{b.value.play().catch(u=>{console.error("重播音频失败:",u),x.error("重播失败: "+u.message)}),i.value=!0},{once:!0}))},I=()=>{i.value=!1,C.value=0},se=()=>{b.value&&(C.value=b.value.currentTime/b.value.duration*100)},re=()=>{var u;(u=P.value)!=null&&u.url&&requestAnimationFrame(()=>{x({message:"音频下载中...",type:"info",customClass:"custom-message"});const t=document.createElement("a");t.href=P.value.url,t.download=`${P.value.name||"未命名语音"}.mp3`,document.body.appendChild(t),t.click(),document.body.removeChild(t),setTimeout(()=>{x({message:"下载完成",type:"success",customClass:"custom-message"})},500)})},pe=u=>{if(!u)return"-";const t=new Date(u),d=t.getHours().toString().padStart(2,"0"),q=t.getMinutes().toString().padStart(2,"0");return`${d}:${q}`},ge=()=>{y.value=""},X=n({}),ve=n({}),he=u=>{const t=ve.value[u];t&&requestAnimationFrame(()=>{t.paused?(Object.keys(ve.value).forEach(d=>{var q;d!==String(u)&&((q=ve.value[d])==null||q.pause(),X.value[d]=!1)}),t.play().catch(d=>{console.error("播放音频失败:",d),x.error("播放失败: "+d.message),X.value[u]=!1}),X.value[u]=!0):(t.pause(),X.value[u]=!1)})},we=u=>{X.value[u]=!1},Ue=u=>{},_e=u=>{if(!u||!u.url){console.error("下载失败：无效的音频URL",u),x.error("下载失败：音频URL不存在");return}console.log("开始下载音频:",u.name,"音频URL:",u.url);try{const t=document.createElement("a");t.href=u.url,t.download=`${u.name||"未命名语音"}.mp3`,document.body.appendChild(t),t.click(),document.body.removeChild(t),x({message:"下载成功",type:"success",customClass:"custom-message"})}catch(t){console.error("下载失败:",t),x.error("下载失败: "+t.message)}},ze=()=>{window.history.back()},Q=n(!1),ue=n("all"),H=n([]),a=n([]),ae=n(!1),le=n(null),ee=n({}),fe=n({}),L=async()=>{try{const t=await(await fetch("/api/voice/categories",{headers:{Authorization:`Bearer ${m.token}`}})).json();H.value=t||[]}catch(u){console.error("获取声音分类失败:",u)}},Ve=async u=>{ae.value=!0;try{let t="/api/voice/list";u==="favorite"?t="/api/voice/favorite/list":u!=="all"&&(t=`/api/voice/list/${u}`);const q=await(await fetch(t,{headers:{Authorization:`Bearer ${m.token}`}})).json();if(u!=="favorite"){const Oe=await(await fetch("/api/voice/favorite/status",{method:"GET",headers:{Authorization:`Bearer ${m.token}`},params:{voiceIds:q.map(qe=>qe.id).join(",")}})).json();a.value=q.map(qe=>({...qe,isFavorite:Oe[qe.id]||!1}))}else a.value=q.map($e=>({...$e,isFavorite:!0}))}catch(t){console.error("获取声音列表失败:",t),a.value=[]}finally{ae.value=!1}},ke=u=>{ue.value=u,Ve(u)},De=u=>{const t=H.value.find(d=>d.id===u);return t?t.name:"未知分类"},Le=u=>{le.value=u},Fe=()=>{le.value&&($.value=le.value.voiceId||le.value.id,f.value=le.value.name,Q.value=!1)},Ae=u=>{if(Object.keys(ee.value).forEach(d=>{if(d!==u.id&&ee.value[d]){const q=fe.value[d];q&&(q.pause(),q.currentTime=0),ee.value[d]=!1}}),!fe.value[u.id]){const d=new Audio(u.voiceUrl);d.addEventListener("ended",()=>{ee.value[u.id]=!1}),fe.value[u.id]=d}const t=fe.value[u.id];ee.value[u.id]?(t.pause(),ee.value[u.id]=!1):(t.play().catch(d=>{console.error("播放预览失败:",d)}),ee.value[u.id]=!0)},Ke=async u=>{try{u.isFavorite?(await fetch(`/api/voice/favorite/${u.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${m.token}`}}),u.isFavorite=!1):(await fetch(`/api/voice/favorite/${u.id}`,{method:"POST",headers:{Authorization:`Bearer ${m.token}`}}),u.isFavorite=!0),ue.value==="favorite"&&Ve("favorite")}catch(t){console.error("操作收藏失败:",t)}};xe(()=>{L(),Ve("all")}),Se(()=>{Object.values(fe.value).forEach(u=>{u&&(u.pause(),u.src="")})});const Ce=n(!1),Ee=n(1),ye=n(""),p=n(3),r=n(100),F=n(!1),N=n([]),G=n(""),be=n(0);n([{title:"朝鲜驱逐舰下水事故细节披露",tag:"通用 20s"},{title:"我国从海上发射一箭4星",tag:"专业 60s"},{title:"今日小满色彩渐满",tag:"友好 120s"}]);const Xe=()=>{Ce.value=!0,Ee.value=1,ye.value="",p.value=3,r.value=100,N.value=[],G.value="",be.value=0},E=()=>{Ce.value=!1},te=gt(async()=>{if(!ye.value.trim()){G.value="请输入话题";return}G.value="",F.value=!0,N.value=[],be.value=0;try{const t=await(await fetch("/api/ai-creation/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m.token}`},body:JSON.stringify({topic:ye.value,count:p.value,wordCount:r.value})})).json();t.code===200?requestAnimationFrame(()=>{N.value=t.data.creations||[],be.value=t.data.cost||0,Ee.value=2,N.value.length===0&&(G.value="未生成文案，请换个话题重试")}):G.value=t.message||"生成失败"}catch(u){G.value=u.message||"请求失败"}finally{F.value=!1}},300),Mt=()=>{te()},jt=async u=>{try{await navigator.clipboard.writeText(u),requestAnimationFrame(()=>{x.success("已复制")})}catch{requestAnimationFrame(()=>{x.error("复制失败")})}},Vt=u=>{y.value=u,Ce.value=!1,x.success("已填入AI文案")};return(u,t)=>(s(),l("div",Ha,[e("button",{onClick:ze,class:"absolute top-8 left-8 flex items-center text-gray-700 hover:text-blue-500 text-lg font-bold px-4 py-2 rounded-lg bg-white/80 shadow-md z-50"},t[13]||(t[13]=[e("svg",{class:"w-6 h-6 mr-2",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M15 19L8 12L15 5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),R(" 返回 ")])),e("div",Ra,[e("div",Da,[t[23]||(t[23]=e("h2",{class:"text-3xl font-bold text-gray-800 mb-6 flex items-center"},[e("span",{class:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-blue-600"},"语音合成"),e("div",{class:"ml-3 px-3 py-1 rounded-full bg-blue-100 text-blue-600 text-xs font-semibold"},"专业版")],-1)),e("div",Fa,[e("div",Oa,[t[15]||(t[15]=e("div",{class:"w-14 h-14 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white font-bold shadow-lg relative overflow-hidden"},[e("div",{class:"absolute inset-0 bg-white/10 rounded-full"}),e("span",{class:"text-lg"},"AI"),e("div",{class:"absolute w-full h-1/3 bottom-0 left-0 bg-black/10"})],-1)),e("div",qa,[t[14]||(t[14]=e("div",{class:"text-sm text-gray-500"},"当前声音",-1)),e("div",Na,k(f.value||"未选择声音"),1)])]),e("button",{onClick:t[0]||(t[0]=d=>Q.value=!0),class:"flex items-center space-x-1 bg-white px-4 py-2.5 rounded-xl text-blue-600 font-medium shadow-md hover:shadow-xl transition-all border border-blue-200 hover:border-blue-300 transform hover:-translate-y-0.5 active:translate-y-0"},t[16]||(t[16]=[e("span",null,"切换声音",-1),e("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M8.91 19.92L15.43 13.4C16.2 12.63 16.2 11.37 15.43 10.6L8.91 4.08",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),e("div",Ga,[e("div",{class:"flex justify-between items-center mb-4"},[t[19]||(t[19]=e("div",{class:"text-xl font-bold text-gray-800"},"文本输入",-1)),e("div",{class:"flex space-x-3"},[e("button",{class:"text-sm text-gray-600 hover:text-blue-500 flex items-center px-3 py-1.5 rounded-lg hover:bg-blue-50 transition-all",onClick:Xe},t[17]||(t[17]=[e("svg",{class:"w-5 h-5 mr-1.5",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M9.5 19H14.5M12 15V19M5 11H19C20.1046 11 21 10.1046 21 9V8C21 6.89543 20.1046 6 19 6H5C3.89543 6 3 6.89543 3 8V9C3 10.1046 3.89543 11 5 11Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),R(" AI创作 ")])),e("button",{class:"text-sm text-gray-600 hover:text-blue-500 flex items-center px-3 py-1.5 rounded-lg hover:bg-blue-50 transition-all",onClick:ge},t[18]||(t[18]=[e("svg",{class:"w-5 h-5 mr-1.5",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M20 6H4M16 6L15.7294 5.18807C15.4671 4.40125 15.3359 4.00784 15.0927 3.71698C14.8779 3.46013 14.6021 3.26132 14.2905 3.13878C13.9376 3 13.523 3 12.6936 3H11.3064C10.477 3 10.0624 3 9.70951 3.13878C9.39792 3.26132 9.12208 3.46013 8.90729 3.71698C8.66405 4.00784 8.53292 4.40125 8.27064 5.18807L8 6M18 6V16.2C18 17.8802 18 18.7202 17.673 19.362C17.3854 19.9265 16.9265 20.3854 16.362 20.673C15.7202 21 14.8802 21 13.2 21H10.8C9.11984 21 8.27976 21 7.63803 20.673C7.07354 20.3854 6.6146 19.9265 6.32698 19.362C6 18.7202 6 17.8802 6 16.2V6M14 10V17M10 10V17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),R(" 清空 ")]))])]),e("div",Za,[W(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=d=>y.value=d),rows:"7",placeholder:"请输入您要合成的文本内容...",class:"w-full p-6 bg-white border-2 border-gray-200 rounded-2xl shadow-inner focus:ring-4 focus:ring-blue-100 focus:border-blue-400 transition-all outline-none resize-none text-gray-700 placeholder-gray-400 font-medium text-lg",maxlength:450},null,512),[[ie,y.value]]),e("div",Wa,k(y.value.length)+"/450 ",1)])]),e("div",Ja,[t[22]||(t[22]=e("div",{class:"mb-4 text-xl font-bold text-gray-800"},[R("声音名称 "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ya,[t[20]||(t[20]=e("div",{class:"absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none"},[e("svg",{class:"w-6 h-6 text-blue-400",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M13 3L21 11M21 11L13 19M21 11H3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),W(e("input",{"onUpdate:modelValue":t[2]||(t[2]=d=>w.value=d),placeholder:"请输入声音名称",class:"w-full pl-14 pr-5 py-4 bg-white border-2 border-gray-200 rounded-2xl shadow-inner focus:ring-4 focus:ring-blue-100 focus:border-blue-400 transition-all outline-none text-gray-700 text-lg font-medium",required:""},null,512),[[ie,w.value]])]),e("button",{onClick:o,class:"w-full h-16 flex items-center justify-center bg-gradient-to-r from-blue-500 to-blue-600 text-white font-bold text-xl rounded-2xl shadow-xl hover:shadow-2xl hover:from-blue-600 hover:to-blue-700 transition-all transform hover:-translate-y-1 active:translate-y-0 relative overflow-hidden group"},t[21]||(t[21]=[Me('<div class="absolute inset-0 w-full h-full bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity" data-v-b9ad000c></div><span class="absolute inset-0 w-full h-full flex items-center justify-center" data-v-b9ad000c><svg class="w-8 h-8 mr-3" viewBox="0 0 24 24" fill="none" data-v-b9ad000c><path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM16 16C15.59 16 15.25 15.78 15.08 15.45C14.9 15.12 14.92 14.73 15.13 14.42L15.55 13.74C15.89 13.18 15.89 12.49 15.54 11.93L13.75 9.06C13.39 8.5 12.76 8.18 12.08 8.18C11.4 8.18 10.77 8.5 10.42 9.06L8.34 12.42C8.07 12.85 7.56 13.07 7.07 12.92C6.58 12.76 6.24 12.27 6.24 11.72V11.72C6.24 11.38 6.4 11.06 6.66 10.86L9.45 8.75C10.34 8.09 11.48 7.82 12.58 8.01C13.69 8.21 14.64 8.84 15.23 9.79L15.91 10.89C16.32 11.56 16.04 12.42 15.37 12.83C14.7 13.25 13.84 12.97 13.42 12.3L12.84 11.36C12.65 11.05 12.28 10.89 11.91 10.95C11.54 11.01 11.25 11.27 11.12 11.62L10.75 12.69C10.56 13.23 10.65 13.83 10.99 14.29L13.26 17.17C13.67 17.69 14.41 17.78 14.93 17.38C15.46 16.97 15.55 16.22 15.15 15.71L15.02 15.53C14.77 15.2 14.77 14.75 15.03 14.42C15.15 14.26 15.32 14.15 15.51 14.09C15.69 14.03 15.89 14.04 16.07 14.1L16.28 14.18C16.7 14.36 16.98 14.79 16.98 15.25C16.98 15.66 16.55 16 16 16Z" fill="currentColor" data-v-b9ad000c></path></svg> 立即生成 </span><div class="absolute -right-12 -top-12 w-32 h-32 rounded-full bg-white/5" data-v-b9ad000c></div><div class="absolute -left-12 -bottom-12 w-32 h-32 rounded-full bg-white/5" data-v-b9ad000c></div>',4)]))])])]),e("div",Ka,[M(Jt,{name:"fade"},{default:J(()=>[e("div",null,[!v.value&&!U.value?(s(),l("div",Xa,t[24]||(t[24]=[e("div",{class:"relative mb-10"},[e("div",{class:"w-64 h-64 rounded-full bg-blue-50 flex items-center justify-center animate-pulse-slow"},[e("div",{class:"w-48 h-48 rounded-full bg-blue-100 flex items-center justify-center"},[e("div",{class:"w-32 h-32 rounded-full bg-blue-200 flex items-center justify-center"},[e("svg",{class:"w-20 h-20 text-blue-500",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M12 18.75C15.3137 18.75 18 16.0637 18 12.75V11.25M12 18.75C8.68629 18.75 6 16.0637 6 12.75V11.25M12 18.75V22.5M8.25 22.5H15.75M12 15.75C10.3431 15.75 9 14.4069 9 12.75V4.5C9 2.84315 10.3431 1.5 12 1.5C13.6569 1.5 15 2.84315 15 4.5V12.75C15 14.4069 13.6569 15.75 12 15.75Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),e("div",{class:"absolute -top-6 -right-6 w-20 h-20 bg-white rounded-full shadow-xl flex items-center justify-center"},[e("svg",{class:"w-10 h-10 text-blue-500",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M12 15V3M12 15L8 11M12 15L16 11M3 12V20C3 20.5523 3.44772 21 4 21H20C20.5523 21 21 20.5523 21 20V12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])])],-1),e("div",{class:"text-center"},[e("h3",{class:"text-3xl font-bold text-gray-800 mb-3"},"AI语音合成"),e("p",{class:"text-gray-500 max-w-md text-lg"},'输入文本，点击"立即生成"按钮，即可生成高品质AI语音')],-1)]))):U.value?(s(),l("div",Qa,t[25]||(t[25]=[e("div",{class:"relative mb-10"},[e("div",{class:"w-64 h-64 rounded-full bg-blue-50 flex items-center justify-center animate-pulse-slow"},[e("div",{class:"w-48 h-48 rounded-full bg-blue-100 flex items-center justify-center"},[e("div",{class:"w-32 h-32 rounded-full bg-blue-200 flex items-center justify-center"},[e("div",{class:"animate-spin rounded-full h-24 w-24 border-b-2 border-blue-500"})])])])],-1),e("div",{class:"text-center"},[e("h3",{class:"text-3xl font-bold text-gray-800 mb-3"},"正在生成语音"),e("p",{class:"text-gray-500 max-w-md text-lg"},"请稍候，我们正在为您生成高品质AI语音...")],-1)]))):(s(),l("div",en,[e("div",tn,[t[33]||(t[33]=e("div",{class:"absolute -top-5 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-2 rounded-full text-base font-bold shadow-lg"}," 已生成 ",-1)),e("div",sn,[e("button",{onClick:V,class:"w-32 h-32 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-2xl hover:shadow-[0_0_30px_rgba(59,130,246,0.5)] transition-all transform hover:scale-105 active:scale-95 relative overflow-hidden group"},[t[28]||(t[28]=e("div",{class:"absolute inset-0 w-full h-full bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),i.value?(s(),l("svg",ln,t[27]||(t[27]=[e("rect",{x:"6",y:"4",width:"4",height:"16",fill:"currentColor"},null,-1),e("rect",{x:"14",y:"4",width:"4",height:"16",fill:"currentColor"},null,-1)]))):(s(),l("svg",on,t[26]||(t[26]=[e("polygon",{points:"6,3 20,12 6,21",fill:"currentColor"},null,-1)])))]),(s(),l("svg",rn,[e("circle",{cx:"50",cy:"50",r:"46",fill:"none",stroke:"#3B82F6","stroke-width":"3","stroke-dasharray":"289.6","stroke-dashoffset":289.6-C.value/100*289.6,transform:"rotate(-90 50 50)",class:"transition-all duration-300"},null,8,an)]))]),e("div",nn,[e("h3",dn,k(P.value.name||"未命名音频"),1),e("div",un,"时长："+k(P.value.duration),1),e("div",cn,[t[30]||(t[30]=e("div",{class:"absolute inset-0 bg-gray-200 rounded-full opacity-50 scale-y-50 transform translate-y-1/4"},null,-1)),e("div",{class:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-300 relative",style:_t({width:C.value+"%"})},t[29]||(t[29]=[e("div",{class:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-1/2 w-4 h-4 bg-white rounded-full border-2 border-blue-500 shadow-md"},null,-1)]),4)])]),e("div",{class:"flex space-x-4"},[e("button",{onClick:D,class:"flex items-center justify-center px-5 py-3 rounded-xl border-2 border-gray-200 bg-white shadow-md hover:shadow-lg transition-all text-gray-700 hover:text-gray-800 hover:border-gray-300"},t[31]||(t[31]=[e("svg",{class:"w-6 h-6 mr-2",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C9.51472 3 7.26472 4.00736 5.63604 5.63604M5 2V6H9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),R(" 重播 ")])),e("button",{onClick:re,class:"flex items-center justify-center px-6 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg hover:shadow-xl transition-all font-medium relative overflow-hidden group"},t[32]||(t[32]=[e("div",{class:"absolute inset-0 w-full h-full bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1),e("svg",{class:"w-6 h-6 mr-2",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M12 15V3M12 15L8 11M12 15L16 11M3 12V20C3 20.5523 3.44772 21 4 21H20C20.5523 21 21 20.5523 21 20V12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),R(" 下载音频 ")]))]),e("audio",{ref_key:"audioRef",ref:b,src:P.value.url,onEnded:I,onTimeupdate:se,class:"hidden"},null,40,vn)]),e("div",fn,[t[34]||(t[34]=e("div",{class:"w-24 h-0.5 bg-gray-200 mr-4"},null,-1)),e("span",null,"生成于 "+k(pe(P.value.createdAt)),1),t[35]||(t[35]=e("div",{class:"w-24 h-0.5 bg-gray-200 ml-4"},null,-1))])]))])]),_:1})]),e("div",mn,[t[39]||(t[39]=e("div",{class:"text-2xl font-bold text-gray-800 mb-8 flex items-center"},[e("svg",{class:"w-7 h-7 mr-2 text-blue-500",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M12 8V12L15 15M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),R(" 历史生成记录 ")],-1)),e("div",pn,[T.value.length===0?(s(),l("div",gn,"暂无历史记录")):(s(),l("div",bn,[(s(!0),l(oe,null,de(T.value,d=>(s(),l("div",{key:d.id,class:"bg-white rounded-2xl shadow-xl p-6 flex flex-col items-start border border-blue-100 hover:shadow-2xl transition-all"},[e("div",xn,[t[36]||(t[36]=e("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-500 rounded-full flex items-center justify-center text-white shadow-md mr-3"},[e("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M9 18L15 12L9 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),e("span",hn,k(d.name||"未命名音频"),1)]),e("div",yn,"时长："+k(d.duration)+"  |  生成于 "+k(pe(d.createdAt)),1),e("audio",{ref_for:!0,ref:q=>ve.value[d.id]=q,src:d.url,onEnded:q=>we(d.id),onTimeupdate:q=>Ue(d.id),class:"hidden"},null,40,wn),e("div",_n,[e("button",{onClick:q=>he(d.id),class:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-blue-500 flex items-center justify-center shadow-lg hover:scale-105 transition-all"},[X.value[d.id]?(s(),l("svg",$n,t[38]||(t[38]=[e("rect",{x:"6",y:"4",width:"4",height:"16",fill:"currentColor"},null,-1),e("rect",{x:"14",y:"4",width:"4",height:"16",fill:"currentColor"},null,-1)]))):(s(),l("svg",Cn,t[37]||(t[37]=[e("polygon",{points:"6,3 20,12 6,21",fill:"currentColor"},null,-1)])))],8,kn),e("button",{onClick:q=>_e(d),class:"px-4 py-2 rounded-lg bg-gradient-to-r from-blue-400 to-blue-500 text-white font-bold shadow hover:from-blue-500 hover:to-blue-600 transition-all"},"下载",8,Mn)])]))),128))]))])]),Q.value?(s(),l("div",jn,[e("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[3]||(t[3]=d=>Q.value=!1)}),e("div",Vn,[e("div",Ln,[t[41]||(t[41]=e("h3",{class:"text-xl font-bold text-gray-800"},"选择声音",-1)),e("button",{onClick:t[4]||(t[4]=d=>Q.value=!1),class:"text-gray-400 hover:text-gray-600"},t[40]||(t[40]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",En,[e("div",In,[e("div",Bn,[t[43]||(t[43]=e("div",{class:"font-semibold text-gray-500 text-sm mb-2"},"我的声音",-1)),e("button",{onClick:t[5]||(t[5]=d=>ke("favorite")),class:O(["flex items-center space-x-2 w-full px-4 py-2 rounded-lg transition-colors mb-2",[ue.value==="favorite"?"bg-blue-100 text-blue-600":"hover:bg-gray-100 text-gray-700"]])},t[42]||(t[42]=[e("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",fill:"currentColor === 'favorite' ? '#3B82F6' : 'none'"})],-1),e("span",null,"我的收藏",-1)]),2)]),e("div",null,[t[44]||(t[44]=e("div",{class:"font-semibold text-gray-500 text-sm mb-2"},"声音分类",-1)),e("button",{onClick:t[6]||(t[6]=d=>ke("all")),class:O(["w-full text-left px-4 py-2 rounded-lg transition-colors mb-2",[ue.value==="all"?"bg-blue-100 text-blue-600":"hover:bg-gray-100 text-gray-700"]])}," 全部声音 ",2),(s(!0),l(oe,null,de(H.value,d=>(s(),l("button",{key:d.id,onClick:q=>ke(d.id),class:O(["w-full text-left px-4 py-2 rounded-lg transition-colors mb-2",[ue.value===d.id?"bg-blue-100 text-blue-600":"hover:bg-gray-100 text-gray-700"]])},k(d.name),11,Sn))),128))])]),e("div",Un,[ae.value?(s(),l("div",zn,t[45]||(t[45]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"},null,-1)]))):a.value.length===0?(s(),l("div",An,t[46]||(t[46]=[e("svg",{class:"w-16 h-16 mb-4 text-gray-300",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M12 18.75C15.3137 18.75 18 16.0637 18 12.75V11.25M12 18.75C8.68629 18.75 6 16.0637 6 12.75V11.25M12 18.75V22.5M8.25 22.5H15.75M12 15.75C10.3431 15.75 9 14.4069 9 12.75V4.5C9 2.84315 10.3431 1.5 12 1.5C13.6569 1.5 15 2.84315 15 4.5V12.75C15 14.4069 13.6569 15.75 12 15.75Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),e("p",null,"该分类下暂无声音",-1)]))):(s(),l("div",Tn,[(s(!0),l(oe,null,de(a.value,d=>{var q,$e;return s(),l("div",{key:d.id,class:O(["bg-white border border-gray-100 rounded-xl p-4 hover:shadow-md transition-shadow cursor-pointer",{"border-blue-500":((q=le.value)==null?void 0:q.id)===d.id}]),onClick:Oe=>Le(d)},[e("div",Hn,[t[50]||(t[50]=e("div",{class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-3"},[e("svg",{class:"w-6 h-6 text-blue-500",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M12 18.75C15.3137 18.75 18 16.0637 18 12.75V11.25M12 18.75C8.68629 18.75 6 16.0637 6 12.75V11.25M12 18.75V22.5M8.25 22.5H15.75M12 15.75C10.3431 15.75 9 14.4069 9 12.75V4.5C9 2.84315 10.3431 1.5 12 1.5C13.6569 1.5 15 2.84315 15 4.5V12.75C15 14.4069 13.6569 15.75 12 15.75Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),e("div",Rn,[e("div",Dn,[e("span",Fn,k(d.name),1),e("div",On,[e("button",{onClick:ce(Oe=>Ke(d),["stop"]),class:O(["p-1.5 rounded-full hover:bg-gray-100",{"text-blue-500":d.isFavorite,"text-gray-400":!d.isFavorite}])},t[47]||(t[47]=[e("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",fill:"voice.isFavorite ? 'currentColor' : 'none'"})],-1)]),10,qn),e("button",{onClick:ce(Oe=>Ae(d),["stop"]),class:"p-1.5 rounded-full hover:bg-gray-100 text-gray-500"},[ee.value[d.id]?(s(),l("svg",Zn,t[49]||(t[49]=[e("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z",fill:"currentColor"},null,-1)]))):(s(),l("svg",Gn,t[48]||(t[48]=[e("path",{d:"M5 3l14 9-14 9V3z",fill:"currentColor"},null,-1)])))],8,Nn)])]),e("div",Wn,k(De(d.categoryId)),1),(($e=le.value)==null?void 0:$e.id)===d.id?(s(),l("div",Jn," 已选择 ")):S("",!0)])])],10,Pn)}),128))]))])]),e("div",Yn,[e("button",{onClick:t[7]||(t[7]=d=>Q.value=!1),class:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"}," 取消 "),e("button",{onClick:Fe,class:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",disabled:!le.value}," 确认选择 ",8,Kn)])])])):S("",!0),Ce.value?(s(),l("div",Xn,[e("div",Qn,[e("div",ei,[e("div",{class:"flex items-center justify-between mb-8"},[t[52]||(t[52]=Me('<div class="flex items-center space-x-2" data-v-b9ad000c><svg class="w-7 h-7 text-blue-500" fill="none" viewBox="0 0 24 24" data-v-b9ad000c><circle cx="12" cy="12" r="10" fill="#e0f2fe" data-v-b9ad000c></circle><path d="M12 7v5l3 3" stroke="#3b82f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b9ad000c></path></svg><span class="text-2xl font-extrabold text-gray-800 tracking-wide" data-v-b9ad000c>AI文案创作</span></div>',1)),e("button",{onClick:E,class:"text-gray-400 hover:text-blue-500 transition-colors"},t[51]||(t[51]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Ee.value===1?(s(),l("div",ti,[e("div",null,[t[53]||(t[53]=e("label",{class:"block text-base font-semibold mb-2 text-gray-700"},[R("话题 "),e("span",{class:"text-red-500"},"*")],-1)),W(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=d=>ye.value=d),rows:"3",maxlength:"200",placeholder:"请输入你想要生成的文案主题或灵感...",class:"w-full p-4 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-blue-100 focus:border-blue-400 outline-none resize-none bg-white text-gray-800 placeholder-gray-400 transition-colors"},null,512),[[ie,ye.value]]),e("div",si,k(ye.value.length)+"/200",1)]),e("div",oi,[e("div",li,[t[55]||(t[55]=e("label",{class:"block text-base font-semibold mb-2 text-gray-700"},"字数",-1)),e("div",ri,[W(e("select",{"onUpdate:modelValue":t[9]||(t[9]=d=>r.value=d),class:"w-full"},t[54]||(t[54]=[e("option",{value:"100"},"约100字 ≈ 20s",-1),e("option",{value:"200"},"约200字 ≈ 40s",-1),e("option",{value:"300"},"约300字 ≈ 60s",-1)]),512),[[bt,r.value]])])]),e("div",ai,[t[56]||(t[56]=e("label",{class:"block text-base font-semibold mb-2 text-gray-700"},"生成数量",-1)),e("div",ni,[W(e("select",{"onUpdate:modelValue":t[10]||(t[10]=d=>p.value=d),class:"w-full"},[(s(),l(oe,null,de([1,2,3,4,5],d=>e("option",{key:d,value:d},k(d)+"条",9,ii)),64))],512),[[bt,p.value]])])])]),G.value?(s(),l("div",di,k(G.value),1)):S("",!0),e("button",{onClick:t[11]||(t[11]=(...d)=>g(te)&&g(te)(...d)),disabled:F.value,class:"w-full h-12 mt-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-bold rounded-2xl shadow hover:from-blue-600 hover:to-blue-700 transition-colors text-lg flex items-center justify-center gap-2 group"},[F.value?(s(),l("span",ci,t[57]||(t[57]=[e("svg",{class:"w-5 h-5 animate-spin mr-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),R(" 正在生成... ")]))):(s(),l("span",vi,"立即生成"))],8,ui),t[58]||(t[58]=e("div",{class:"text-xs text-blue-400 mt-2 text-center"},[R("消耗 "),e("span",{class:"font-bold"},"1"),R(" 算力/条")],-1))])):(s(),l("div",fi,[e("div",mi,[e("button",{onClick:t[12]||(t[12]=d=>Ee.value=1),class:"px-3 py-1.5 bg-gray-50 hover:bg-gray-100 text-gray-600 rounded-lg text-sm font-medium transition-colors"},"返回修改"),t[59]||(t[59]=e("span",{class:"text-lg font-bold text-gray-800"},"AI文案创作结果",-1))]),e("div",pi,[(s(!0),l(oe,null,de(N.value,(d,q)=>(s(),l("div",{key:q,class:"group flex flex-col gap-3 p-6 hover:bg-gray-50/50 transition-colors"},[e("div",gi,[e("span",bi,k(q+1),1),e("span",xi,"文案"+k(q+1),1)]),e("div",hi,k(d),1),e("div",yi,[e("button",{onClick:$e=>jt(d),class:"px-4 py-1.5 bg-white border border-gray-200 text-gray-600 rounded-lg font-medium hover:bg-gray-50 hover:border-gray-300 transition-colors"},"复制",8,wi),e("button",{onClick:$e=>Vt(d),class:"px-4 py-1.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-blue-700 transition-colors"},"去使用",8,_i)])]))),128))]),e("button",{onClick:Mt,class:"w-full h-11 mt-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-bold rounded-2xl shadow hover:from-blue-600 hover:to-blue-700 transition-colors text-lg flex items-center justify-center"},[F.value?(s(),l("span",ki,t[60]||(t[60]=[e("svg",{class:"w-5 h-5 animate-spin mr-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),R(" 正在生成... ")]))):(s(),l("span",Ci,"重新生成"))]),t[61]||(t[61]=e("div",{class:"text-xs text-blue-400 mt-2 text-center"},[R("消耗 "),e("span",{class:"font-bold"},"1"),R(" 算力/条")],-1))]))])])])):S("",!0)]))}},Mi=je($i,[["__scopeId","data-v-b9ad000c"]]),ji=[{path:"/",name:"Home",component:Il},{path:"/market",name:"Market",component:()=>Te(()=>import("./Market-2e8a338d.js"),["assets/Market-2e8a338d.js","assets/vendor-84cddc83.js","assets/vendor-0e2aff5e.css"]),meta:{requiresAuth:!0,title:"形象市场"}},{path:"/works",name:"Works",component:()=>Te(()=>import("./Works-f24cec8b.js"),["assets/Works-f24cec8b.js","assets/vendor-84cddc83.js","assets/vendor-0e2aff5e.css","assets/Works-6cb8a8e7.css"])},{path:"/digital-human",name:"DigitalHuman",component:jr},{path:"/create",name:"Create",component:()=>Te(()=>import("./Create-1713cce6.js"),["assets/Create-1713cce6.js","assets/vendor-84cddc83.js","assets/vendor-0e2aff5e.css","assets/Create-c570ead4.css"])},{path:"/voice-clone",name:"VoiceClone",component:Pa,meta:{title:"声音克隆",requiresAuth:!0}},{path:"/voice-clone/upload",name:"VoiceCloneUpload",component:()=>Te(()=>import("./VoiceCloneUpload-4fdb7748.js"),["assets/VoiceCloneUpload-4fdb7748.js","assets/vendor-84cddc83.js","assets/vendor-0e2aff5e.css"])},{path:"/voice-create",name:"VoiceCreation",component:Mi,meta:{title:"声音创作",requiresAuth:!0}},{path:"/user-center",name:"UserCenter",component:()=>Te(()=>import("./UserCenter-de05f7d6.js"),["assets/UserCenter-de05f7d6.js","assets/vendor-84cddc83.js","assets/vendor-0e2aff5e.css","assets/UserCenter-86f2a727.css"]),meta:{title:"个人中心",requiresAuth:!0}}],Vi=Kt({history:Xt("/"),routes:ji}),$t=Qt();$t.use(es);const Ye=ts(nl);Ye.use(Vi);Ye.use($t);Ye.use(ss,{locale:os});Ye.mount("#app");export{je as _,Je as a,me as b,Ct as c,K as r,Bl as u};
